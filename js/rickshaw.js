(function(){function l(a){for(var b=-1,c=a.length,d=[];++b<c;)d.push(a[b]);return d}function h(){}function e(a){return a}function n(){return this}function q(){return!0}function r(a){return"function"===typeof a?a:function(){return a}}function s(a,b,c){return function(){var d=c.apply(b,arguments);return arguments.length?a:d}}function w(a){return null!=a&&!isNaN(a)}function E(a){return a.length}function R(a){return null==a}function y(){}function N(a){function b(){for(var b=c,d=-1,k=b.length,m;++d<k;)(m=
b[d].on)&&m.apply(this,arguments);return a}var c=[],d=new h;b.on=function(b,g){var k=d.get(b),m;if(2>arguments.length)return k&&k.on;k&&(k.on=null,c=c.slice(0,m=c.indexOf(k)).concat(c.slice(m+1)),d.remove(b));g&&c.push(d.set(b,{on:g}));return a};return b}function H(a,b){return b-(a?1+Math.floor(Math.log(a+Math.pow(10,1+Math.floor(Math.log(a)/Math.LN10)-b))/Math.LN10):1)}function jb(a){return a+""}function qa(a){for(var b=a.lastIndexOf("."),c=0<=b?a.substring(b):(b=a.length,""),d=[];0<b;)d.push(a.substring(b-=
3,b+3));return d.reverse().join(",")+c}function Da(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function Ea(a){return function(b){return 1-a(1-b)}}function ha(a){return function(b){return 0.5*(0.5>b?a(2*b):2-a(2-2*b))}}function kb(a){return a}function lb(a){return function(b){return Math.pow(b,a)}}function Rd(a){return 1-Math.cos(a*Math.PI/2)}function Sd(a){return Math.pow(2,10*(a-1))}function Td(a){return 1-Math.sqrt(1-a*a)}function Ud(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*
a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375}function Q(){d3.event.stopPropagation();d3.event.preventDefault()}function ec(){for(var a=d3.event,b;b=a.sourceEvent;)a=b;return a}function mb(a){for(var b=new y,c=0,d=arguments.length;++c<d;)b[arguments[c]]=N(b);b.of=function(c,d){return function(k){try{var m=k.sourceEvent=d3.event;k.target=a;d3.event=k;b[k.type].apply(c,d)}finally{d3.event=m}}};return b}function ba(a){var b=[a.a,a.b],c=[a.c,a.d],d=fc(b),f=b[0]*c[0]+
b[1]*c[1],g=-f;c[0]+=g*b[0];c[1]+=g*b[1];g=fc(c)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,f*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*gc;this.translate=[a.e,a.f];this.scale=[d,g];this.skew=g?Math.atan2(f,g)*gc:0}function fc(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function ra(a){return"transform"==a?d3.interpolateTransform:d3.interpolate}function Vd(a,b){b=b-(a=+a)?1/(b-a):0;return function(c){return(c-a)*b}}function Wd(a,b){b=b-(a=+a)?
1/(b-a):0;return function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function ia(){}function W(a,b,c){return new nb(a,b,c)}function nb(a,b,c){this.r=a;this.g=b;this.b=c}function ja(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function ob(a,b,c){var d=0,f=0,g=0,k,m;if(k=/([a-z]+)\((.*)\)/i.exec(a))switch(m=k[2].split(","),k[1]){case "hsl":return c(parseFloat(m[0]),parseFloat(m[1])/100,parseFloat(m[2])/100);case "rgb":return b(pb(m[0]),pb(m[1]),pb(m[2]))}if(c=Fa.get(a))return b(c.r,
c.g,c.b);null!=a&&"#"===a.charAt(0)&&(4===a.length?(d=a.charAt(1),d+=d,f=a.charAt(2),f+=f,g=a.charAt(3),g+=g):7===a.length&&(d=a.substring(1,3),f=a.substring(3,5),g=a.substring(5,7)),d=parseInt(d,16),f=parseInt(f,16),g=parseInt(g,16));return b(d,f,g)}function hc(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),f=Math.max(a,b,c),g=f-d,k=(f+d)/2;g?(d=0.5>k?g/(f+d):g/(2-f-d),a=60*(a==f?(b-c)/g+(b<c?6:0):b==f?(c-a)/g+2:(a-b)/g+4)):d=a=0;return ka(a,d,k)}function ic(a,b,c){a=qb(a);b=qb(b);c=qb(c);var d=rb((0.4124564*
a+0.3575761*b+0.1804375*c)/jc),f=rb((0.2126729*a+0.7151522*b+0.072175*c)/kc);a=rb((0.0193339*a+0.119192*b+0.9503041*c)/lc);return la(116*f-16,500*(d-f),200*(f-a))}function qb(a){return 0.04045>=(a/=255)?a/12.92:Math.pow((a+0.055)/1.055,2.4)}function pb(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*b):b}function ka(a,b,c){return new sb(a,b,c)}function sb(a,b,c){this.h=a;this.s=b;this.l=c}function Ga(a,b,c){function d(a){360<a?a-=360:0>a&&(a+=360);return 60>a?f+(g-f)*a/60:
180>a?g:240>a?f+(g-f)*(240-a)/60:f}var f,g;a%=360;0>a&&(a+=360);b=0>b?0:1<b?1:b;c=0>c?0:1<c?1:c;g=0.5>=c?c*(1+b):c+b-c*b;f=2*c-g;return W(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function sa(a,b,c){return new Ha(a,b,c)}function Ha(a,b,c){this.h=a;this.c=b;this.l=c}function tb(a,b,c){return la(c,Math.cos(a*=Math.PI/180)*b,Math.sin(a)*b)}function la(a,b,c){return new Ia(a,b,c)}function Ia(a,b,c){this.l=a;this.a=b;this.b=c}function mc(a,b,c){a=(a+16)/116;c=a-c/200;b=ub(a+
b/500)*jc;a=ub(a)*kc;c=ub(c)*lc;return W(vb(3.2404542*b-1.5371385*a-0.4985314*c),vb(-0.969266*b+1.8760108*a+0.041556*c),vb(0.0556434*b-0.2040259*a+1.0572252*c))}function nc(a,b,c){return sa(180*(Math.atan2(c,b)/Math.PI),Math.sqrt(b*b+c*c),a)}function ub(a){return 0.206893034<a?a*a*a:(a-4/29)/7.787037}function rb(a){return 0.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function vb(a){return Math.round(255*(0.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-0.055))}function X(a){wb(a,D);return a}function oc(a){return function(){return Ja(a,
this)}}function pc(a){return function(){return qc(a,this)}}function rc(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function f(){this.setAttribute(a,b)}function g(){this.setAttributeNS(a.space,a.local,b)}function k(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function m(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=d3.ns.qualify(a);
return null==b?a.local?d:c:"function"===typeof b?a.local?m:k:a.local?g:f}function sc(a){return RegExp("(?:^|\\s+)"+d3.requote(a)+"(?:\\s+|$)","g")}function tc(a,b){function c(){for(var c=-1;++c<f;)a[c](this,b)}function d(){for(var c=-1,d=b.apply(this,arguments);++c<f;)a[c](this,d)}a=a.trim().split(/\s+/).map(Xd);var f=a.length;return"function"===typeof b?d:c}function Xd(a){var b=sc(a);return function(c,d){if(f=c.classList)return d?f.add(a):f.remove(a);var f=c.className,g=null!=f.baseVal,k=g?f.baseVal:
f;d?(b.lastIndex=0,b.test(k)||(k=(k+" "+a).trim().replace(/\s+/g," "),g?f.baseVal=k:c.className=k)):k&&(k=k.replace(b," ").trim().replace(/\s+/g," "),g?f.baseVal=k:c.className=k)}}function uc(a,b,c){function d(){this.style.removeProperty(a)}function f(){this.style.setProperty(a,b,c)}function g(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"===typeof b?g:f}function vc(a,b){function c(){delete this[a]}function d(){this[a]=
b}function f(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}return null==b?c:"function"===typeof b?f:d}function wc(a){return function(){return xc(this,a)}}function Yd(a){arguments.length||(a=d3.ascending);return function(b,c){return a(b&&b.__data__,c&&c.__data__)}}function yc(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function f(){function f(a){var c=d3.event;d3.event=a;u[0]=k.__data__;try{b.apply(k,u)}finally{d3.event=c}}var k=this,u=
arguments;d.call(this);this.addEventListener(a,this[g]=f,f.$=c);f._=b}var g="__on"+a,k=a.indexOf(".");0<k&&(a=a.substring(0,k));return b?f:d}function ta(a,b){for(var c=0,d=a.length;c<d;c++)for(var f=a[c],g=0,k=f.length,m;g<k;g++)(m=f[g])&&b(m,g,c);return a}function zc(a){wb(a,ca);return a}function La(a,b,c){wb(a,O);var d=new h,f=d3.dispatch("start","end"),g=Ma;a.id=b;a.time=c;a.tween=function(b,c){if(2>arguments.length)return d.get(b);null==c?d.remove(b):d.set(b,c);return a};a.ease=function(b){if(!arguments.length)return g;
g="function"===typeof b?b:d3.ease.apply(d3,arguments);return a};a.each=function(b,c){if(2>arguments.length)return Zd.call(a,b);f.on(b,c);return a};d3.timer(function(k){return ta(a,function(a,p,u){function e(g){if(n.active>b)return F();n.active=b;d.forEach(function(b,c){(c=c.call(a,K,p))&&v.push(c)});f.start.call(a,K,p);t(g)||d3.timer(t,0,c);return 1}function t(c){if(n.active!==b)return F();c=(c-l)/h;for(var d=g(c),k=v.length;0<k;)v[--k].call(a,d);if(1<=c)return F(),da=b,f.end.call(a,K,p),da=0,1}function F(){--n.count||
delete a.__transition__;return 1}var v=[],l=a.delay,h=a.duration,n=(a=a.node).__transition__||(a.__transition__={active:0,count:0}),K=a.__data__;++n.count;l<=k?e(k):d3.timer(e,l,c)})},0,c);return a}function Zd(a){var b=da,c=Ma,d=Na,f=Oa;da=this.id;Ma=this.ease();ta(this,function(b,c,d){Na=b.delay;Oa=b.duration;a.call(b=b.node,b.__data__,c,d)});da=b;Ma=c;Na=d;Oa=f;return this}function $d(a,b,c){return""!=c&&ua}function xb(){for(var a,b=Date.now(),c=ma;c;)a=b-c.then,a>=c.delay&&(c.flush=c.callback(a)),
c=c.next;a=Ac()-b;24<a?(isFinite(a)&&(clearTimeout(Pa),Pa=setTimeout(xb,a)),Qa=0):(Qa=1,Bc(xb))}function Ac(){for(var a=null,b=ma,c=Infinity;b;)b.flush?(delete yb[b.callback.id],b=a?a.next=b.next:ma=b.next):(c=Math.min(c,b.then+b.delay),b=(a=b).next);return c}function Cc(a,b){var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>zb&&(window.scrollX||window.scrollY)){var c=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0),f=c[0][0].getScreenCTM();
zb=!(f.f||f.e);c.remove()}zb?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY);d=d.matrixTransform(a.getScreenCTM().inverse());return[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function va(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function Ra(a){return a.rangeExtent?a.rangeExtent():va(a.range())}function Sa(a,b){var c=0,d=a.length-1,f=a[c],g=a[d],k;g<f&&(k=c,c=d,d=k,k=f,f=g,g=k);if(b=b(g-f))a[c]=b.floor(f),a[d]=b.ceil(g);
return a}function ae(){return Math}function Dc(a,b,c,d){function f(){var f=2<Math.min(a.length,b.length)?be:ce,u=d?Wd:Vd;k=f(a,b,u,c);m=f(b,a,u,d3.interpolate);return g}function g(a){return k(a)}var k,m;g.invert=function(a){return m(a)};g.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return f()};g.range=function(a){if(!arguments.length)return b;b=a;return f()};g.rangeRound=function(a){return g.range(a).interpolate(d3.interpolateRound)};g.clamp=function(a){if(!arguments.length)return d;
d=a;return f()};g.interpolate=function(a){if(!arguments.length)return c;c=a;return f()};g.ticks=function(b){return Ab(a,b)};g.tickFormat=function(b){return Bb(a,b)};g.nice=function(){Sa(a,Ec);return f()};g.copy=function(){return Dc(a,b,c,d)};return f()}function Fc(a,b){return d3.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Ec(a){return(a=Math.pow(10,Math.round(Math.log(a)/Math.LN10)-1))&&{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}}function Gc(a,
b){var c=va(a),d=c[1]-c[0],f=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*f;0.15>=d?f*=10:0.35>=d?f*=5:0.75>=d&&(f*=2);c[0]=Math.ceil(c[0]/f)*f;c[1]=Math.floor(c[1]/f)*f+0.5*f;c[2]=f;return c}function Ab(a,b){return d3.range.apply(d3,Gc(a,b))}function Bb(a,b){return d3.format(",."+Math.max(0,-Math.floor(Math.log(Gc(a,b)[2])/Math.LN10+0.01))+"f")}function ce(a,b,c,d){var f=c(a[0],a[1]),g=d(b[0],b[1]);return function(a){return g(f(a))}}function be(a,b,c,d){var f=[],g=[],k=0,m=Math.min(a.length,
b.length)-1;a[m]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++k<=m;)f.push(c(a[k-1],a[k])),g.push(d(b[k-1],b[k]));return function(b){var c=d3.bisect(a,b,1,m)-1;return g[c](f[c](b))}}function Hc(a,b){function c(c){return a(b(c))}var d=b.pow;c.invert=function(b){return d(a.invert(b))};c.domain=function(f){if(!arguments.length)return a.domain().map(d);b=0>f[0]?Ta:Cb;d=b.pow;a.domain(f.map(b));return c};c.nice=function(){a.domain(Sa(a.domain(),ae));return c};c.ticks=function(){var c=va(a.domain()),
g=[];if(c.every(isFinite)){var k=Math.floor(c[0]),m=Math.ceil(c[1]),p=d(c[0]),c=d(c[1]);if(b===Ta)for(g.push(d(k));k++<m;)for(var u=9;0<u;u--)g.push(d(k)*u);else{for(;k<m;k++)for(u=1;10>u;u++)g.push(d(k)*u);g.push(d(k))}for(k=0;g[k]<p;k++);for(m=g.length;g[m-1]>c;m--);g=g.slice(k,m)}return g};c.tickFormat=function(a,g){2>arguments.length&&(g=de);if(1>arguments.length)return g;var k=Math.max(0.1,a/c.ticks().length),m=b===Ta?(p=-1E-12,Math.floor):(p=1E-12,Math.ceil),p;return function(a){return a/d(m(b(a)+
p))<=k?g(a):""}};c.copy=function(){return Hc(a.copy(),b)};return Fc(c,a)}function Cb(a){return Math.log(0>a?0:a)/Math.LN10}function Ta(a){return-Math.log(0<a?0:-a)/Math.LN10}function Ic(a,b){function c(b){return a(d(b))}var d=Ua(b),f=Ua(1/b);c.invert=function(b){return f(a.invert(b))};c.domain=function(b){if(!arguments.length)return a.domain().map(f);a.domain(b.map(d));return c};c.ticks=function(a){return Ab(c.domain(),a)};c.tickFormat=function(a){return Bb(c.domain(),a)};c.nice=function(){return c.domain(Sa(c.domain(),
Ec))};c.exponent=function(a){if(!arguments.length)return b;var k=c.domain();d=Ua(b=a);f=Ua(1/b);return c.domain(k)};c.copy=function(){return Ic(a.copy(),b)};return Fc(c,a)}function Ua(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function Jc(a,b){function c(b){return g[((f.get(b)||f.set(b,a.push(b)))-1)%g.length]}function d(b,c){return d3.range(a.length).map(function(a){return b+c*a})}var f,g,k;c.domain=function(d){if(!arguments.length)return a;a=[];f=new h;for(var g=-1,k=d.length,
e;++g<k;)f.has(e=d[g])||f.set(e,a.push(e));return c[b.t].apply(c,b.a)};c.range=function(a){if(!arguments.length)return g;g=a;k=0;b={t:"range",a:arguments};return c};c.rangePoints=function(f,p){2>arguments.length&&(p=0);var u=f[0],e=f[1],t=(e-u)/(Math.max(1,a.length-1)+p);g=d(2>a.length?(u+e)/2:u+t*p/2,t);k=0;b={t:"rangePoints",a:arguments};return c};c.rangeBands=function(f,p,u){2>arguments.length&&(p=0);3>arguments.length&&(u=p);var e=f[1]<f[0],t=f[e-0],F=(f[1-e]-t)/(a.length-p+2*u);g=d(t+F*u,F);
e&&g.reverse();k=F*(1-p);b={t:"rangeBands",a:arguments};return c};c.rangeRoundBands=function(f,p,u){2>arguments.length&&(p=0);3>arguments.length&&(u=p);var e=f[1]<f[0],t=f[e-0],F=f[1-e],v=Math.floor((F-t)/(a.length-p+2*u));g=d(t+Math.round((F-t-(a.length-p)*v)/2),v);e&&g.reverse();k=Math.round(v*(1-p));b={t:"rangeRoundBands",a:arguments};return c};c.rangeBand=function(){return k};c.rangeExtent=function(){return va(b.a[0])};c.copy=function(){return Jc(a,b)};return c.domain(a)}function Kc(a,b){function c(){var c=
0,k=b.length;for(f=[];++c<k;)f[c-1]=d3.quantile(a,c/k);return d}function d(a){return isNaN(a=+a)?NaN:b[d3.bisect(f,a)]}var f;d.domain=function(b){if(!arguments.length)return a;a=b.filter(function(a){return!isNaN(a)}).sort(d3.ascending);return c()};d.range=function(a){if(!arguments.length)return b;b=a;return c()};d.quantiles=function(){return f};d.copy=function(){return Kc(a,b)};return c()}function Lc(a,b,c){function d(b){return c[Math.max(0,Math.min(k,Math.floor(g*(b-a))))]}function f(){g=c.length/
(b-a);k=c.length-1;return d}var g,k;d.domain=function(c){if(!arguments.length)return[a,b];a=+c[0];b=+c[c.length-1];return f()};d.range=function(a){if(!arguments.length)return c;c=a;return f()};d.copy=function(){return Lc(a,b,c)};return f()}function Mc(a,b){function c(c){return b[d3.bisect(a,c)]}c.domain=function(b){if(!arguments.length)return a;a=b;return c};c.range=function(a){if(!arguments.length)return b;b=a;return c};c.copy=function(){return Mc(a,b)};return c}function Nc(a){function b(a){return+a}
b.invert=b;b.domain=b.range=function(c){if(!arguments.length)return a;a=c.map(b);return b};b.ticks=function(b){return Ab(a,b)};b.tickFormat=function(b){return Bb(a,b)};b.copy=function(){return Nc(a)};return b}function ee(a){return a.innerRadius}function fe(a){return a.outerRadius}function Oc(a){return a.startAngle}function Pc(a){return a.endAngle}function Qc(a){function b(b){function k(){e.push("M",g(a(t),m))}for(var e=[],t=[],F=-1,v=b.length,l,h=r(c),n=r(d);++F<v;)f.call(this,l=b[F],F)?t.push([+h.call(this,
l,F),+n.call(this,l,F)]):t.length&&(k(),t=[]);t.length&&k();return e.length?e.join(""):null}var c=Db,d=Rc,f=q,g=P,k=g.key,m=0.7;b.x=function(a){if(!arguments.length)return c;c=a;return b};b.y=function(a){if(!arguments.length)return d;d=a;return b};b.defined=function(a){if(!arguments.length)return f;f=a;return b};b.interpolate=function(a){if(!arguments.length)return k;k="function"===typeof a?g=a:(g=Eb.get(a)||P).key;return b};b.tension=function(a){if(!arguments.length)return m;m=a;return b};return b}
function Db(a){return a[0]}function Rc(a){return a[1]}function P(a){return a.join("L")}function Fb(a){for(var b=0,c=a.length,d=a[0],f=[d[0],",",d[1]];++b<c;)f.push("V",(d=a[b])[1],"H",d[0]);return f.join("")}function Gb(a){for(var b=0,c=a.length,d=a[0],f=[d[0],",",d[1]];++b<c;)f.push("H",(d=a[b])[0],"V",d[1]);return f.join("")}function Va(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return P(a);var c=a.length!=b.length,d="",f=a[0],g=a[1],k=b[0],m=k,p=1;c&&(d+="Q"+(g[0]-2*k[0]/3)+","+
(g[1]-2*k[1]/3)+","+g[0]+","+g[1],f=a[1],p=2);if(1<b.length){m=b[1];g=a[p];p++;d+="C"+(f[0]+k[0])+","+(f[1]+k[1])+","+(g[0]-m[0])+","+(g[1]-m[1])+","+g[0]+","+g[1];for(f=2;f<b.length;f++,p++)g=a[p],m=b[f],d+="S"+(g[0]-m[0])+","+(g[1]-m[1])+","+g[0]+","+g[1]}c&&(c=a[p],d+="Q"+(g[0]+2*m[0]/3)+","+(g[1]+2*m[1]/3)+","+c[0]+","+c[1]);return d}function Hb(a,b){for(var c=[],d=(1-b)/2,f,g=a[0],k=a[1],m=1,p=a.length;++m<p;)f=g,g=k,k=a[m],c.push([d*(k[0]-f[0]),d*(k[1]-f[1])]);return c}function Sc(a){if(3>a.length)return P(a);
var b=1,c=a.length,d=a[0],f=d[0],g=d[1],k=[f,f,f,(d=a[1])[0]],m=[g,g,g,d[1]],f=[f,",",g];for(wa(f,k,m);++b<c;)d=a[b],k.shift(),k.push(d[0]),m.shift(),m.push(d[1]),wa(f,k,m);for(b=-1;2>++b;)k.shift(),k.push(d[0]),m.shift(),m.push(d[1]),wa(f,k,m);return f.join("")}function V(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function wa(a,b,c){a.push("C",V(Tc,b),",",V(Tc,c),",",V(Uc,b),",",V(Uc,c),",",V(na,b),",",V(na,c))}function Ib(a,b){return(b[1]-a[1])/(b[0]-a[0])}function Vc(a){for(var b,c=-1,
d=a.length,f,g;++c<d;)b=a[c],f=b[0],g=b[1]+ea,b[0]=f*Math.cos(g),b[1]=f*Math.sin(g);return a}function Wc(a){function b(b){function p(){l.push("M",m(a(n),t),e,u(a(h.reverse()),t),"Z")}for(var l=[],h=[],n=[],K=-1,I=b.length,C,q=r(c),A=r(f),B=c===d?function(){return w}:r(d),s=f===g?function(){return Xc}:r(g),w,Xc;++K<I;)k.call(this,C=b[K],K)?(h.push([w=+q.call(this,C,K),Xc=+A.call(this,C,K)]),n.push([+B.call(this,C,K),+s.call(this,C,K)])):h.length&&(p(),h=[],n=[]);h.length&&p();return l.length?l.join(""):
null}var c=Db,d=Db,f=0,g=Rc,k=q,m=P,p=m.key,u=m,e="L",t=0.7;b.x=function(a){if(!arguments.length)return d;c=d=a;return b};b.x0=function(a){if(!arguments.length)return c;c=a;return b};b.x1=function(a){if(!arguments.length)return d;d=a;return b};b.y=function(a){if(!arguments.length)return g;f=g=a;return b};b.y0=function(a){if(!arguments.length)return f;f=a;return b};b.y1=function(a){if(!arguments.length)return g;g=a;return b};b.defined=function(a){if(!arguments.length)return k;k=a;return b};b.interpolate=
function(a){if(!arguments.length)return p;p="function"===typeof a?m=a:(m=Eb.get(a)||P).key;u=m.reverse||m;e=m.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return t;t=a;return b};return b}function Yc(a){return a.source}function Zc(a){return a.target}function ge(a){return a.radius}function $c(a){return[a.x,a.y]}function he(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]+ea;return[c*Math.cos(b),c*Math.sin(b)]}}function ie(){return 64}function je(){return"circle"}
function ad(a){a=Math.sqrt(a/Math.PI);return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function bd(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function cd(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function ke(a,b,c){d=[];if(c&&1<b.length){a=va(a.domain());for(var d,f=-1,g=b.length,k=(b[1]-b[0])/++c,m,p;++f<g;)for(m=c;0<--m;)(p=+b[f]-m*k)>=a[0]&&d.push(p);--f;for(m=0;++m<c&&(p=+b[f]+m*k)<a[1];)d.push(p)}return d}function le(){xa||
(xa=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var a=d3.event,b;try{xa.scrollTop=1E3,xa.dispatchEvent(a),b=1E3-xa.scrollTop}catch(c){b=a.wheelDelta||5*-a.detail}return b}function me(a){var b=a.source;a=a.target;var c;var d=a;if(b===d)c=b;else{c=dd(b);for(var d=dd(d),f=c.pop(),g=d.pop(),k=null;f===g;)k=f,f=c.pop(),g=d.pop();c=k}for(d=[b];b!==c;)b=
b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d}function dd(a){for(var b=[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;b.push(a);return b}function ne(a){a.fixed|=2}function oe(a){a.fixed&=1}function pe(a){a.fixed|=4}function qe(a){a.fixed&=3}function ed(a,b,c){var d=0,f=0;a.charge=0;if(!a.leaf)for(var g=a.nodes,k=g.length,m=-1,p;++m<k;)p=g[m],null!=p&&(ed(p,b,c),a.charge+=p.charge,d+=p.charge*p.cx,f+=p.charge*p.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-0.5,a.point.y+=
Math.random()-0.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,f+=b*a.point.y);a.cx=d/a.charge;a.cy=f/a.charge}function re(a){return 20}function se(a){return 1}function te(a){return a.x}function ue(a){return a.y}function ve(a,b,c){a.y0=b;a.y=c}function Jb(a){return d3.range(a.length)}function Kb(a){var b=-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function we(a){for(var b=1,c=0,d=a[0][1],f,g=a.length;b<g;++b)if((f=a[b][1])>d)c=b,d=f;return c}function xe(a){return a.reduce(ye,
0)}function ye(a,b){return a+b[1]}function ze(a,b){return fd(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function fd(a,b){for(var c=-1,d=+a[0],f=(a[1]-d)/b,g=[];++c<=b;)g[c]=f*c+d;return g}function Ae(a){return[d3.min(a),d3.max(a)]}function ya(a,b){d3.rebind(a,b,"sort","children","value");a.links=Be;a.nodes=function(b){Lb=!0;return(a.nodes=a)(b)};return a}function Ce(a){return a.children}function De(a){return a.value}function Ee(a,b){return b.value-a.value}function Be(a){return d3.merge(a.map(function(a){return(a.children||
[]).map(function(c){return{source:a,target:c}})}))}function Fe(a,b){return a.value-b.value}function Mb(a,b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function gd(a,b){a._pack_next=b;b._pack_prev=a}function hd(a,b){var c=b.x-a.x,d=b.y-a.y,f=a.r+b.r;return 0.0010<f*f-c*c-d*d}function id(a){function b(a){d=Math.min(a.x-a.r,d);f=Math.max(a.x+a.r,f);g=Math.min(a.y-a.r,g);k=Math.max(a.y+a.r,k)}if((c=a.children)&&(v=c.length)){var c,d=Infinity,f=-Infinity,g=Infinity,
k=-Infinity,m,p,u,e,t,F,v;c.forEach(Ge);m=c[0];m.x=-m.r;m.y=0;b(m);if(1<v&&(p=c[1],p.x=p.r,p.y=0,b(p),2<v)){u=c[2];jd(m,p,u);b(u);Mb(m,u);m._pack_prev=u;Mb(u,p);p=m._pack_next;for(e=3;e<v;e++){jd(m,p,u=c[e]);var l=0,h=1,n=1;for(t=p._pack_next;t!==p;t=t._pack_next,h++)if(hd(t,u)){l=1;break}if(1==l)for(F=m._pack_prev;F!==t._pack_prev&&!hd(F,u);F=F._pack_prev,n++);l?(h<n||h==n&&p.r<m.r?gd(m,p=t):gd(m=F,p),e--):(Mb(m,u),p=u,b(u))}}m=(d+f)/2;p=(g+k)/2;for(e=t=0;e<v;e++)u=c[e],u.x-=m,u.y-=p,t=Math.max(t,
u.r+Math.sqrt(u.x*u.x+u.y*u.y));a.r=t;c.forEach(He)}}function Ge(a){a._pack_next=a._pack_prev=a}function He(a){delete a._pack_next;delete a._pack_prev}function kd(a,b,c,d){var f=a.children;a.x=b+=d*a.x;a.y=c+=d*a.y;a.r*=d;if(f){a=-1;for(var g=f.length;++a<g;)kd(f[a],b,c,d)}}function jd(a,b,c){var d=a.r+c.r,f=b.x-a.x,g=b.y-a.y;if(d&&(f||g)){var k=b.r+c.r,m=f*f+g*g,k=k*k,d=d*d;b=0.5+(d-k)/(2*m);k=Math.sqrt(Math.max(0,2*k*(d+m)-(d-=m)*d-k*k))/(2*m);c.x=a.x+b*f+k*g;c.y=a.y+b*g-k*f}else c.x=a.x+d,c.y=
a.y}function Ie(a){return 1+d3.max(a,function(a){return a.y})}function Je(a){return a.reduce(function(a,c){return a+c.x},0)/a.length}function ld(a){var b=a.children;return b&&b.length?ld(b[0]):a}function md(a){var b=a.children,c;return b&&(c=b.length)?md(b[c-1]):a}function nd(a,b){return a.parent==b.parent?1:2}function Nb(a){var b=a.children;return b&&b.length?b[0]:a._tree.thread}function Ob(a){var b=a.children,c;return b&&(c=b.length)?b[c-1]:a._tree.thread}function Wa(a,b){var c=a.children;if(c&&
(f=c.length))for(var d,f,g=-1;++g<f;)if(0<b(d=Wa(c[g],b),a))a=d;return a}function Ke(a,b){return a.x-b.x}function Le(a,b){return b.x-a.x}function Me(a,b){return a.depth-b.depth}function Z(a,b){function c(a,f){var g=a.children;if(g&&(u=g.length))for(var k,m=null,p=-1,u;++p<u;)k=g[p],c(k,m),m=k;b(a,f)}c(a,null)}function Pb(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function od(a,b){var c=a.x+b[3],d=a.y+b[0],f=a.dx-b[1]-b[3],g=a.dy-b[0]-b[2];0>f&&(c+=f/2,f=0);0>g&&(d+=g/2,g=0);return{x:c,y:d,dx:f,dy:g}}
function pd(a,b){function c(a,d){d3.text(a,b,function(a){d(a&&c.parse(a))})}function d(b){return b.map(f).join(a)}function f(a){return k.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var g=RegExp("\r\n|["+a+"\r\n]","g"),k=RegExp('["'+a+"\n]"),m=a.charCodeAt(0);c.parse=function(a){var b;return c.parseRows(a,function(a,c){if(c){for(var d={},f=-1,g=b.length;++f<g;)d[b[f]]=a[f];return d}b=a;return null})};c.parseRows=function(a,b){function c(){if(g.lastIndex>=a.length)return f;if(h)return h=!1,d;var b=g.lastIndex;
if(34===a.charCodeAt(b)){for(var k=b;k++<a.length;)if(34===a.charCodeAt(k)){if(34!==a.charCodeAt(k+1))break;k++}g.lastIndex=k+2;var u=a.charCodeAt(k+1);13===u?(h=!0,10===a.charCodeAt(k+2)&&g.lastIndex++):10===u&&(h=!0);return a.substring(b+1,k).replace(/""/g,'"')}if(k=g.exec(a))return h=k[0].charCodeAt(0)!==m,a.substring(b,k.index);g.lastIndex=a.length;return a.substring(b)}var d={},f={},k=[],e=0,l,h;for(g.lastIndex=0;(l=c())!==f;){for(var n=[];l!==d&&l!==f;)n.push(l),l=c();(!b||(n=b(n,e++)))&&k.push(n)}return k};
c.format=function(a){return a.map(d).join("\n")};return c}function Xa(a,b){return function(c){return c&&a.hasOwnProperty(c.type)?a[c.type](c):b}}function Qb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function Ya(a,b){if(qd.hasOwnProperty(a.type))qd[a.type](a,b)}function rd(a,b){for(var c=a.coordinates,d=0,f=c.length;d<f;d++)b.apply(null,c[d])}function Ne(a){return a.source}function Oe(a){return a.target}function sd(){function a(a){var b=Math.sin(a*=v)*h,c=Math.sin(v-
a)*h;a=c*g+b*t;var d=c*k+b*l,b=c*f+b*e;return[Math.atan2(d,a)/x,Math.atan2(b,Math.sqrt(a*a+d*d))/x]}var b,c,d,f,g,k,m,p,u,e,t,l,v,h;a.distance=function(){null==v&&(h=1/Math.sin(v=Math.acos(Math.max(-1,Math.min(1,f*e+d*u*Math.cos(m-b))))));return v};a.source=function(m){var p=Math.cos(b=m[0]*x),t=Math.sin(b);d=Math.cos(c=m[1]*x);f=Math.sin(c);g=d*p;k=d*t;v=null;return a};a.target=function(b){var c=Math.cos(m=b[0]*x),d=Math.sin(m);u=Math.cos(p=b[1]*x);e=Math.sin(p);t=u*c;l=u*d;v=null;return a};return a}
function td(a,b){var c=sd().source(a).target(b);c.distance();return c}function Pe(a,b,c,d){var f,g,k;a=d[a];f=a[0];g=a[1];a=d[b];b=a[0];k=a[1];a=d[c];return 0<(a[1]-g)*(b-f)-(k-g)*(a[0]-f)}function Rb(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function ud(a,b,c,d){var f=a[0],g=c[0];a=a[1];var k=c[1];c=b[0]-f;var m=d[0]-g;b=b[1]-a;d=d[1]-k;g=(m*(a-k)-d*(f-g))/(d*c-m*b);return[f+g*c,a+g*b]}function vd(a,b){var c=a.map(function(a,b){return{index:b,x:a[0],y:a[1]}}).sort(function(a,b){return a.y<
b.y?-1:a.y>b.y?1:a.x<b.x?-1:a.x>b.x?1:0}),d=null,f={list:[],leftEnd:null,rightEnd:null,init:function(){f.leftEnd=f.createHalfEdge(null,"l");f.rightEnd=f.createHalfEdge(null,"l");f.leftEnd.r=f.rightEnd;f.rightEnd.l=f.leftEnd;f.list.unshift(f.leftEnd,f.rightEnd)},createHalfEdge:function(a,b){return{edge:a,side:b,vertex:null,l:null,r:null}},insert:function(a,b){b.l=a;b.r=a.r;a.r.l=b;a.r=b},leftBound:function(a){var b=f.leftEnd;do b=b.r;while(b!=f.rightEnd&&g.rightOf(b,a));return b=b.l},del:function(a){a.l.r=
a.r;a.r.l=a.l;a.edge=null},right:function(a){return a.r},left:function(a){return a.l},leftRegion:function(a){return null==a.edge?d:a.edge.region[a.side]},rightRegion:function(a){return null==a.edge?d:a.edge.region[Sb[a.side]]}},g={bisect:function(a,b){var c={region:{l:a,r:b},ep:{l:null,r:null}},d=b.x-a.x,f=b.y-a.y;c.c=a.x*d+a.y*f+0.5*(d*d+f*f);(0<d?d:-d)>(0<f?f:-f)?(c.a=1,c.b=f/d,c.c/=d):(c.b=1,c.a=d/f,c.c/=f);return c},intersect:function(a,b){var c=a.edge,d=b.edge;if(!c||!d||c.region.r==d.region.r)return null;
var f=c.a*d.b-c.b*d.a;if(1E-10>Math.abs(f))return null;var g=(c.c*d.b-d.c*c.b)/f,f=(d.c*c.a-c.c*d.a)/f,k=c.region.r,m=d.region.r;k.y<m.y||k.y==m.y&&k.x<m.x?k=a:(k=b,c=d);return(c=g>=c.region.r.x)&&"l"===k.side||!c&&"r"===k.side?null:{x:g,y:f}},rightOf:function(a,b){var c=a.edge,d=c.region.r,f=b.x>d.x;if(f&&"l"===a.side)return 1;if(!f&&"r"===a.side)return 0;if(1===c.a){var g=b.y-d.y,k=b.x-d.x,m=0,p=0;!f&&0>c.b||f&&0<=c.b?p=m=g>=c.b*k:(p=b.x+b.y*c.b>c.c,0>c.b&&(p=!p),p||(m=1));m||(d=d.x-c.region.l.x,
p=c.b*(k*k-g*g)<d*g*(1+2*k/d+c.b*c.b),0>c.b&&(p=!p))}else k=c.c-c.a*b.x,c=b.y-k,g=b.x-d.x,d=k-d.y,p=c*c>g*g+d*d;return"l"===a.side?p:!p},endPoint:function(a,c,d){a.ep[c]=d;a.ep[Sb[c]]&&b(a)},distance:function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}},k={list:[],insert:function(a,b,c){a.vertex=b;a.ystar=b.y+c;c=0;for(var d=k.list,f=d.length;c<f;c++){var g=d[c];if(!(a.ystar>g.ystar||a.ystar==g.ystar&&b.x>g.vertex.x))break}d.splice(c,0,a)},del:function(a){for(var b=0,c=k.list,d=c.length;b<
d&&c[b]!=a;++b);c.splice(b,1)},empty:function(){return 0===k.list.length},nextEvent:function(a){for(var b=0,c=k.list,d=c.length;b<d;++b)if(c[b]==a)return c[b+1];return null},min:function(){var a=k.list[0];return{x:a.vertex.x,y:a.ystar}},extractMin:function(){return k.list.shift()}};f.init();for(var d=c.shift(),m=c.shift(),p,u,e,t,l,h,n,z,Y;;)if(k.empty()||(p=k.min()),m&&(k.empty()||m.y<p.y||m.y==p.y&&m.x<p.x)){u=f.leftBound(m);e=f.right(u);n=f.rightRegion(u);Y=g.bisect(n,m);h=f.createHalfEdge(Y,"l");
f.insert(u,h);if(z=g.intersect(u,h))k.del(u),k.insert(u,z,g.distance(z,m));u=h;h=f.createHalfEdge(Y,"r");f.insert(u,h);(z=g.intersect(h,e))&&k.insert(h,z,g.distance(z,m));m=c.shift()}else if(k.empty())break;else{u=k.extractMin();t=f.left(u);e=f.right(u);l=f.right(e);n=f.leftRegion(u);h=f.rightRegion(e);z=u.vertex;g.endPoint(u.edge,u.side,z);g.endPoint(e.edge,e.side,z);f.del(u);k.del(e);f.del(e);u="l";n.y>h.y&&(u=n,n=h,h=u,u="r");Y=g.bisect(n,h);h=f.createHalfEdge(Y,u);f.insert(t,h);g.endPoint(Y,Sb[u],
z);if(z=g.intersect(t,h))k.del(t),k.insert(t,z,g.distance(z,n));(z=g.intersect(h,l))&&k.insert(h,z,g.distance(z,n))}for(u=f.right(f.leftEnd);u!=f.rightEnd;u=f.right(u))b(u.edge)}function za(a,b,c,d,f,g){if(!a(b,c,d,f,g)){var k=0.5*(c+f),m=0.5*(d+g);b=b.nodes;b[0]&&za(a,b[0],c,d,k,m);b[1]&&za(a,b[1],k,d,f,m);b[2]&&za(a,b[2],c,m,k,g);b[3]&&za(a,b[3],k,m,f,g)}}function Qe(a){return{x:a[0],y:a[1]}}function fa(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function wd(a){return a.substring(0,
3)}function Za(a,b,c,d){for(var f,g=0,k=b.length,m=c.length;g<k;){if(d>=m)return-1;f=b.charCodeAt(g++);if(37==f){if(f=Re[b.charAt(g++)],!f||0>(d=f(a,c,d)))return-1}else if(f!=c.charCodeAt(d++))return-1}return d}function $a(a){return RegExp("^(?:"+a.map(d3.requote).join("|")+")","i")}function xd(a){for(var b=new h,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function yd(a,b,c){L.lastIndex=0;return(b=L.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function zd(a,b,c){L.lastIndex=
0;return(b=L.exec(b.substring(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function Tb(a){return a.toISOString()}function ga(a,b,c){function d(b){var c=a(b),d=g(c,1);return b-c<d-b?c:d}function f(c){b(c=a(new M(c-1)),1);return c}function g(a,c){b(a=new M(+a),c);return a}function k(a,d,g){a=f(a);var k=[];if(1<g)for(;a<d;)c(a)%g||k.push(new Date(+a)),b(a,1);else for(;a<d;)k.push(new Date(+a)),b(a,1);return k}a.floor=a;a.round=d;a.ceil=f;a.offset=g;a.range=k;var m=a.utc=ab(a);m.floor=m;m.round=ab(d);m.ceil=
ab(f);m.offset=ab(g);m.range=function(a,b,c){try{M=fa;var d=new fa;d._=a;return k(d,b,c)}finally{M=Date}};return a}function ab(a){return function(b,c){try{M=fa;var d=new fa;d._=b;return a(d,c)._}finally{M=Date}}}function Ub(a,b,c){function d(b){return a(b)}d.invert=function(b){return Vb(a.invert(b))};d.domain=function(b){if(!arguments.length)return a.domain().map(Vb);a.domain(b);return d};d.nice=function(a){return d.domain(Sa(d.domain(),function(){return a}))};d.ticks=function(c,g){var k,m=d.domain();
k=m[0];m=m[m.length-1];k=k<m?[k,m]:[m,k];if("function"!==typeof c){var m=(k[1]-k[0])/c,p=d3.bisect(bb,m);if(p==bb.length)return b.year(k,c);if(!p)return a.ticks(c).map(Vb);Math.log(m/bb[p-1])<Math.log(bb[p]/m)&&--p;c=b[p];g=c[1];c=c[0].range}return c(k[0],new Date(+k[1]+1),g)};d.tickFormat=function(){return c};d.copy=function(){return Ub(a.copy(),b,c)};return d3.rebind(d,a,"range","rangeRound","interpolate","clamp")}function Vb(a){return new Date(a)}function Ad(a){return function(b){for(var c=a.length-
1,d=a[c];!d[1](b);)d=a[--c];return d[0](b)}}function Wb(a){var b=new Date(a,0,1);b.setFullYear(a);return b}function Se(a){var b=a.getFullYear(),c=Wb(b),d=Wb(b+1);return b+(a-c)/(d-c)}function Xb(a){var b=new Date(Date.UTC(a,0,1));b.setUTCFullYear(a);return b}function Te(a){var b=a.getUTCFullYear(),c=Xb(b),d=Xb(b+1);return b+(a-c)/(d-c)}Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(Cf){var Bd=CSSStyleDeclaration.prototype,
Ue=Bd.setProperty;Bd.setProperty=function(a,b,c){Ue.call(this,a,b+"",c)}}d3={version:"2.10.3"};var Aa=function(a){return Array.prototype.slice.call(a)};try{Aa(document.documentElement.childNodes)[0].nodeType}catch(Df){Aa=l}var wb=[].__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]};d3.map=function(a){var b=new h,c;for(c in a)b.set(c,a[c]);return b};(function(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}})(h,
{has:function(a){return Ba+a in this},get:function(a){return this[Ba+a]},set:function(a,b){return this[Ba+a]=b},remove:function(a){a=Ba+a;return a in this&&delete this[a]},keys:function(){var a=[];this.forEach(function(b){a.push(b)});return a},values:function(){var a=[];this.forEach(function(b,c){a.push(c)});return a},entries:function(){var a=[];this.forEach(function(b,c){a.push({key:b,value:c})});return a},forEach:function(a){for(var b in this)b.charCodeAt(0)===Ve&&a.call(this,b.substring(1),this[b])}});
var Ba="\x00",Ve=Ba.charCodeAt(0);d3.functor=r;d3.rebind=function(a,b){for(var c=1,d=arguments.length,f;++c<d;)a[f=arguments[c]]=s(a,b,b[f]);return a};d3.ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};d3.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};d3.mean=function(a,b){var c=a.length,d,f=0,g=-1,k=0;if(1===arguments.length)for(;++g<c;){if(w(d=a[g]))f+=(d-f)/++k}else for(;++g<c;)if(w(d=b.call(a,a[g],g)))f+=(d-f)/++k;return k?f:void 0};d3.median=function(a,b){1<arguments.length&&
(a=a.map(b));a=a.filter(w);return a.length?d3.quantile(a.sort(d3.ascending),0.5):void 0};d3.min=function(a,b){var c=-1,d=a.length,f,g;if(1===arguments.length){for(;++c<d&&(null==(f=a[c])||f!=f);)f=void 0;for(;++c<d;)if(null!=(g=a[c])&&f>g)f=g}else{for(;++c<d&&(null==(f=b.call(a,a[c],c))||f!=f);)f=void 0;for(;++c<d;)if(null!=(g=b.call(a,a[c],c))&&f>g)f=g}return f};d3.max=function(a,b){var c=-1,d=a.length,f,g;if(1===arguments.length){for(;++c<d&&(null==(f=a[c])||f!=f);)f=void 0;for(;++c<d;)if(null!=
(g=a[c])&&g>f)f=g}else{for(;++c<d&&(null==(f=b.call(a,a[c],c))||f!=f);)f=void 0;for(;++c<d;)if(null!=(g=b.call(a,a[c],c))&&g>f)f=g}return f};d3.extent=function(a,b){var c=-1,d=a.length,f,g,k;if(1===arguments.length){for(;++c<d&&(null==(f=k=a[c])||f!=f);)f=k=void 0;for(;++c<d;)if(null!=(g=a[c]))f>g&&(f=g),k<g&&(k=g)}else{for(;++c<d&&(null==(f=k=b.call(a,a[c],c))||f!=f);)f=void 0;for(;++c<d;)if(null!=(g=b.call(a,a[c],c)))f>g&&(f=g),k<g&&(k=g)}return[f,k]};d3.random={normal:function(a,b){var c=arguments.length;
2>c&&(b=1);1>c&&(a=0);return function(){var c,f;do c=2*Math.random()-1,f=2*Math.random()-1,f=c*c+f*f;while(!f||1<f);return a+b*c*Math.sqrt(-2*Math.log(f)/f)}},logNormal:function(a,b){var c=arguments.length;2>c&&(b=1);1>c&&(a=0);var d=d3.random.normal();return function(){return Math.exp(a+b*d())}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b/a}}};d3.sum=function(a,b){var c=0,d=a.length,f,g=-1;if(1===arguments.length)for(;++g<d;){if(!isNaN(f=+a[g]))c+=f}else for(;++g<
d;)if(!isNaN(f=+b.call(a,a[g],g)))c+=f;return c};d3.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),f=a[d-1];return(c-=d)?f+c*(a[d]-f):f};d3.transpose=function(a){return d3.zip.apply(d3,a)};d3.zip=function(){if(!(f=arguments.length))return[];for(var a=-1,b=d3.min(arguments,E),c=Array(b);++a<b;)for(var d=-1,f,g=c[a]=Array(f);++d<f;)g[d]=arguments[d][a];return c};d3.bisector=function(a){return{left:function(b,c,d,f){3>arguments.length&&(d=0);4>arguments.length&&(f=b.length);for(;d<f;){var g=
d+f>>>1;a.call(b,b[g],g)<c?d=g+1:f=g}return d},right:function(b,c,d,f){3>arguments.length&&(d=0);4>arguments.length&&(f=b.length);for(;d<f;){var g=d+f>>>1;c<a.call(b,b[g],g)?f=g:d=g+1}return d}}};var Cd=d3.bisector(function(a){return a});d3.bisectLeft=Cd.left;d3.bisect=d3.bisectRight=Cd.right;d3.first=function(a,b){var c=0,d=a.length,f=a[0],g;1===arguments.length&&(b=d3.ascending);for(;++c<d;)if(0<b.call(a,f,g=a[c]))f=g;return f};d3.last=function(a,b){var c=0,d=a.length,f=a[0],g;1===arguments.length&&
(b=d3.ascending);for(;++c<d;)if(0>=b.call(a,f,g=a[c]))f=g;return f};d3.nest=function(){function a(b,f){if(f>=d.length)return k?k.call(c,b):g?b.sort(g):b;for(var u=-1,e=b.length,t=d[f++],l,v,n=new h,z,Y={};++u<e;)(z=n.get(l=t(v=b[u])))?z.push(v):n.set(l,[v]);n.forEach(function(b,c){Y[b]=a(c,f)});return Y}function b(a,c){if(c>=d.length)return a;var g=[],k=f[c++],t;for(t in a)g.push({key:t,values:b(a[t],c)});k&&g.sort(function(a,b){return k(a.key,b.key)});return g}var c={},d=[],f=[],g,k;c.map=function(b){return a(b,
0)};c.entries=function(c){return b(a(c,0),0)};c.key=function(a){d.push(a);return c};c.sortKeys=function(a){f[d.length-1]=a;return c};c.sortValues=function(a){g=a;return c};c.rollup=function(a){k=a;return c};return c};d3.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};d3.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};d3.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};d3.permute=function(a,b){for(var c=[],d=-1,f=b.length;++d<f;)c[d]=a[b[d]];
return c};d3.merge=function(a){return Array.prototype.concat.apply([],a)};d3.split=function(a,b){var c=[],d=[],f,g=-1,k=a.length;for(2>arguments.length&&(b=R);++g<k;)b.call(d,f=a[g],g)?d=[]:(d.length||c.push(d),d.push(f));return c};d3.range=function(a,b,c){3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0));if(Infinity===(b-a)/c)throw Error("infinite range");var d=[],f;f=Math.abs(c);for(var g=1;f*g%1;)g*=10;f=g;var g=-1,k;a*=f;b*=f;c*=f;if(0>c)for(;(k=a+c*++g)>b;)d.push(k/f);else for(;(k=a+c*
++g)<b;)d.push(k/f);return d};d3.requote=function(a){return a.replace(We,"\\$&")};var We=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};d3.xhr=function(a,b,c){var d=new XMLHttpRequest;3>arguments.length?(c=b,b=null):b&&d.overrideMimeType&&d.overrideMimeType(b);d.open("GET",a,!0);b&&d.setRequestHeader("Accept",b);d.onreadystatechange=function(){if(4===d.readyState){var a=d.status;c(!a&&d.response||200<=a&&300>a||304===a?d:null)}};
d.send(null)};d3.text=function(a,b,c){3>arguments.length&&(c=b,b=null);d3.xhr(a,b,function(a){c(a&&a.responseText)})};d3.json=function(a,b){d3.text(a,"application/json",function(a){b(a?JSON.parse(a):null)})};d3.html=function(a,b){d3.text(a,"text/html",function(a){if(null!=a){var d=document.createRange();d.selectNode(document.body);a=d.createContextualFragment(a)}b(a)})};d3.xml=function(a,b,c){3>arguments.length&&(c=b,b=null);d3.xhr(a,b,function(a){c(a&&a.responseXML)})};var Yb={svg:"http://www.w3.org/2000/svg",
xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:Yb,qualify:function(a){var b=a.indexOf(":"),c=a;0<=b&&(c=a.substring(0,b),a=a.substring(b+1));return Yb.hasOwnProperty(c)?{space:Yb[c],local:a}:a}};d3.dispatch=function(){for(var a=new y,b=-1,c=arguments.length;++b<c;)a[arguments[b]]=N(a);return a};y.prototype.on=function(a,b){var c=a.indexOf("."),d="";0<c&&(d=a.substring(c+1),a=
a.substring(0,c));return 2>arguments.length?this[a].on(d):this[a].on(d,b)};d3.format=function(a){a=Xe.exec(a);var b=a[1]||" ",c=a[3]||"",d=a[5],f=+a[6],g=a[7],k=a[8],m=a[9],p=1,e="",h=!1;k&&(k=+k.substring(1));d&&(b="0",g&&(f-=Math.floor((f-1)/4)));switch(m){case "n":g=!0;m="g";break;case "%":p=100;e="%";m="f";break;case "p":p=100;e="%";m="r";break;case "d":h=!0;k=0;break;case "s":p=-1,m="r"}"r"==m&&!k&&(m="g");m=Ye.get(m)||jb;return function(a){if(h&&a%1)return"";var l=0>a&&(a=-a)?"-":c;if(0>p){var v=
d3.formatPrefix(a,k);a=v.scale(a);e=v.symbol}else a*=p;a=m(a,k);d?(v=a.length+l.length,v<f&&(a=Array(f-v+1).join(b)+a),g&&(a=qa(a)),a=l+a):(g&&(a=qa(a)),a=l+a,v=a.length,v<f&&(a=Array(f-v+1).join(b)+a));return a+e}};var Xe=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,Ye=d3.map({g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return d3.round(a,b=H(a,b)).toFixed(Math.max(0,Math.min(20,
b)))}}),Ze="y z a f p n \u03bc m  k M G T P E Z Y".split(" ").map(function(a,b){var c=Math.pow(10,3*Math.abs(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});d3.formatPrefix=function(a,b){var c=0;a&&(0>a&&(a*=-1),b&&(a=d3.round(a,H(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3))));return Ze[8+c/3]};var $e=lb(2),af=lb(3),Dd=function(){return kb},bf=d3.map({linear:Dd,poly:lb,quad:function(){return $e},cubic:function(){return af},
sin:function(){return Rd},exp:function(){return Sd},circle:function(){return Td},elastic:function(a,b){var c;2>arguments.length&&(b=0.45);1>arguments.length?(a=1,c=b/4):c=b/(2*Math.PI)*Math.asin(1/a);return function(d){return 1+a*Math.pow(2,10*-d)*Math.sin(2*(d-c)*Math.PI/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return Ud}}),cf=d3.map({"in":kb,out:Ea,"in-out":ha,"out-in":function(a){return ha(Ea(a))}});d3.ease=function(a){var b=a.indexOf("-"),
c=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in",c=bf.get(c)||Dd,b=cf.get(b)||kb;return Da(b(c.apply(null,Array.prototype.slice.call(arguments,1))))};d3.event=null;d3.transform=function(a){var b=document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(a){b.setAttribute("transform",a);a=b.transform.baseVal.consolidate();return new ba(a?a.matrix:df)})(a)};ba.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+
this.scale+")"};var gc=180/Math.PI,df={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolate=function(a,b){for(var c=d3.interpolators.length,d;0<=--c&&!(d=d3.interpolators[c](a,b)););return d};d3.interpolateNumber=function(a,b){b-=a;return function(c){return a+b*c}};d3.interpolateRound=function(a,b){b-=a;return function(c){return Math.round(a+b*c)}};d3.interpolateString=function(a,b){var c,d,f=0,g=[],k=[],m,p;for(d=cb.lastIndex=0;c=cb.exec(b);++d)c.index&&g.push(b.substring(f,c.index)),k.push({i:g.length,x:c[0]}),
g.push(null),f=cb.lastIndex;f<b.length&&g.push(b.substring(f));d=0;for(m=k.length;(c=cb.exec(a))&&d<m;++d)if(p=k[d],p.x==c[0]){if(p.i)if(null==g[p.i+1]){g[p.i-1]+=p.x;g.splice(p.i,1);for(c=d+1;c<m;++c)k[c].i--}else{g[p.i-1]+=p.x+g[p.i+1];g.splice(p.i,2);for(c=d+1;c<m;++c)k[c].i-=2}else if(null==g[p.i+1])g[p.i]=p.x;else{g[p.i]=p.x+g[p.i+1];g.splice(p.i+1,1);for(c=d+1;c<m;++c)k[c].i--}k.splice(d,1);m--;d--}else p.x=d3.interpolateNumber(parseFloat(c[0]),parseFloat(p.x));for(;d<m;)p=k.pop(),null==g[p.i+
1]?g[p.i]=p.x:(g[p.i]=p.x+g[p.i+1],g.splice(p.i+1,1)),m--;return 1===g.length?null==g[0]?k[0].x:function(){return b}:function(a){for(d=0;d<m;++d)g[(p=k[d]).i]=p.x(a);return g.join("")}};d3.interpolateTransform=function(a,b){var c=[],d=[],f,g=d3.transform(a),k=d3.transform(b),m=g.translate,p=k.translate,e=g.rotate,h=k.rotate,t=g.skew,l=k.skew,g=g.scale,k=k.scale;m[0]!=p[0]||m[1]!=p[1]?(c.push("translate(",null,",",null,")"),d.push({i:1,x:d3.interpolateNumber(m[0],p[0])},{i:3,x:d3.interpolateNumber(m[1],
p[1])})):p[0]||p[1]?c.push("translate("+p+")"):c.push("");e!=h?(180<e-h?h+=360:180<h-e&&(e+=360),d.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(e,h)})):h&&c.push(c.pop()+"rotate("+h+")");t!=l?d.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(t,l)}):l&&c.push(c.pop()+"skewX("+l+")");g[0]!=k[0]||g[1]!=k[1]?(f=c.push(c.pop()+"scale(",null,",",null,")"),d.push({i:f-4,x:d3.interpolateNumber(g[0],k[0])},{i:f-2,x:d3.interpolateNumber(g[1],k[1])})):(1!=k[0]||1!=k[1])&&
c.push(c.pop()+"scale("+k+")");f=d.length;return function(a){for(var b=-1,g;++b<f;)c[(g=d[b]).i]=g.x(a);return c.join("")}};d3.interpolateRgb=function(a,b){a=d3.rgb(a);b=d3.rgb(b);var c=a.r,d=a.g,f=a.b,g=b.r-c,k=b.g-d,m=b.b-f;return function(a){return"#"+ja(Math.round(c+g*a))+ja(Math.round(d+k*a))+ja(Math.round(f+m*a))}};d3.interpolateHsl=function(a,b){a=d3.hsl(a);b=d3.hsl(b);var c=a.h,d=a.s,f=a.l,g=b.h-c,k=b.s-d,m=b.l-f;180<g?g-=360:-180>g&&(g+=360);return function(a){return Ga(c+g*a,d+k*a,f+m*a)+
""}};d3.interpolateLab=function(a,b){a=d3.lab(a);b=d3.lab(b);var c=a.l,d=a.a,f=a.b,g=b.l-c,k=b.a-d,m=b.b-f;return function(a){return mc(c+g*a,d+k*a,f+m*a)+""}};d3.interpolateHcl=function(a,b){a=d3.hcl(a);b=d3.hcl(b);var c=a.h,d=a.c,f=a.l,g=b.h-c,k=b.c-d,m=b.l-f;180<g?g-=360:-180>g&&(g+=360);return function(a){return tb(c+g*a,d+k*a,f+m*a)+""}};d3.interpolateArray=function(a,b){var c=[],d=[],f=a.length,g=b.length,k=Math.min(a.length,b.length),m;for(m=0;m<k;++m)c.push(d3.interpolate(a[m],b[m]));for(;m<
f;++m)d[m]=a[m];for(;m<g;++m)d[m]=b[m];return function(a){for(m=0;m<k;++m)d[m]=c[m](a);return d}};d3.interpolateObject=function(a,b){var c={},d={},f;for(f in a)f in b?c[f]=ra(f)(a[f],b[f]):d[f]=a[f];for(f in b)f in a||(d[f]=b[f]);return function(a){for(f in c)d[f]=c[f](a);return d}};var cb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(a,b){return b instanceof Array&&d3.interpolateArray(a,b)},function(a,b){return("string"===typeof a||"string"===typeof b)&&
d3.interpolateString(a+"",b+"")},function(a,b){return("string"===typeof b?Fa.has(b)||/^(#|rgb\(|hsl\()/.test(b):b instanceof ia)&&d3.interpolateRgb(a,b)},function(a,b){return!isNaN(a=+a)&&!isNaN(b=+b)&&d3.interpolateNumber(a,b)}];ia.prototype.toString=function(){return this.rgb()+""};d3.rgb=function(a,b,c){return 1===arguments.length?a instanceof nb?W(a.r,a.g,a.b):ob(""+a,W,Ga):W(~~a,~~b,~~c)};var db=nb.prototype=new ia;db.brighter=function(a){a=Math.pow(0.7,arguments.length?a:1);var b=this.r,c=this.g,
d=this.b;if(!b&&!c&&!d)return W(30,30,30);b&&30>b&&(b=30);c&&30>c&&(c=30);d&&30>d&&(d=30);return W(Math.min(255,Math.floor(b/a)),Math.min(255,Math.floor(c/a)),Math.min(255,Math.floor(d/a)))};db.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return W(Math.floor(a*this.r),Math.floor(a*this.g),Math.floor(a*this.b))};db.hsl=function(){return hc(this.r,this.g,this.b)};db.toString=function(){return"#"+ja(this.r)+ja(this.g)+ja(this.b)};var Fa=d3.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",
aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",
darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",
greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",
lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",
olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",
slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});Fa.forEach(function(a,b){Fa.set(a,ob(b,W,Ga))});d3.hsl=function(a,b,c){return 1===arguments.length?a instanceof sb?ka(a.h,a.s,a.l):ob(""+a,hc,ka):ka(+a,+b,+c)};var Zb=sb.prototype=new ia;Zb.brighter=function(a){a=
Math.pow(0.7,arguments.length?a:1);return ka(this.h,this.s,this.l/a)};Zb.darker=function(a){a=Math.pow(0.7,arguments.length?a:1);return ka(this.h,this.s,a*this.l)};Zb.rgb=function(){return Ga(this.h,this.s,this.l)};d3.hcl=function(a,b,c){return 1===arguments.length?a instanceof Ha?sa(a.h,a.c,a.l):a instanceof Ia?nc(a.l,a.a,a.b):nc((a=ic((a=d3.rgb(a)).r,a.g,a.b)).l,a.a,a.b):sa(+a,+b,+c)};var $b=Ha.prototype=new ia;$b.brighter=function(a){return sa(this.h,this.c,Math.min(100,this.l+eb*(arguments.length?
a:1)))};$b.darker=function(a){return sa(this.h,this.c,Math.max(0,this.l-eb*(arguments.length?a:1)))};$b.rgb=function(){return tb(this.h,this.c,this.l).rgb()};d3.lab=function(a,b,c){return 1===arguments.length?a instanceof Ia?la(a.l,a.a,a.b):a instanceof Ha?tb(a.l,a.c,a.h):ic((a=d3.rgb(a)).r,a.g,a.b):la(+a,+b,+c)};var eb=18,jc=0.95047,kc=1,lc=1.08883,ac=Ia.prototype=new ia;ac.brighter=function(a){return la(Math.min(100,this.l+eb*(arguments.length?a:1)),this.a,this.b)};ac.darker=function(a){return la(Math.max(0,
this.l-eb*(arguments.length?a:1)),this.a,this.b)};ac.rgb=function(){return mc(this.l,this.a,this.b)};var Ja=function(a,b){return b.querySelector(a)},qc=function(a,b){return b.querySelectorAll(a)},oa=document.documentElement,ef=oa.matchesSelector||oa.webkitMatchesSelector||oa.mozMatchesSelector||oa.msMatchesSelector||oa.oMatchesSelector,xc=function(a,b){return ef.call(a,b)};"function"===typeof Sizzle&&(Ja=function(a,b){return Sizzle(a,b)[0]||null},qc=function(a,b){return Sizzle.uniqueSort(Sizzle(a,
b))},xc=Sizzle.matchesSelector);var D=[];d3.selection=function(){return Ca};d3.selection.prototype=D;D.select=function(a){var b=[],c,d,f,g;"function"!==typeof a&&(a=oc(a));for(var k=-1,m=this.length;++k<m;){b.push(c=[]);c.parentNode=(f=this[k]).parentNode;for(var p=-1,e=f.length;++p<e;)(g=f[p])?(c.push(d=a.call(g,g.__data__,p)),d&&"__data__"in g&&(d.__data__=g.__data__)):c.push(null)}return X(b)};D.selectAll=function(a){var b=[],c,d;"function"!==typeof a&&(a=pc(a));for(var f=-1,g=this.length;++f<
g;)for(var k=this[f],m=-1,p=k.length;++m<p;)if(d=k[m])b.push(c=Aa(a.call(d,d.__data__,m))),c.parentNode=d;return X(b)};D.attr=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node();a=d3.ns.qualify(a);return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(rc(b,a[b]));return this}return this.each(rc(a,b))};D.classed=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/g)).length,f=-1;if(b=c.classList)for(;++f<
d;){if(!b.contains(a[f]))return!1}else{b=c.className;null!=b.baseVal&&(b=b.baseVal);for(;++f<d;)if(!sc(a[f]).test(b))return!1}return!0}for(b in a)this.each(tc(b,a[b]));return this}return this.each(tc(a,b))};D.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b="");for(c in a)this.each(uc(c,a[c],b));return this}if(2>d)return window.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(uc(a,b,c))};D.property=function(a,b){if(2>arguments.length){if("string"===
typeof a)return this.node()[a];for(b in a)this.each(vc(b,a[b]));return this}return this.each(vc(a,b))};D.text=function(a){return 1>arguments.length?this.node().textContent:this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a})};D.html=function(a){return 1>arguments.length?this.node().innerHTML:this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=
null==b?"":b}:null==a?function(){this.innerHTML=""}:function(){this.innerHTML=a})};D.append=function(a){function b(){return this.appendChild(document.createElementNS(this.namespaceURI,a))}function c(){return this.appendChild(document.createElementNS(a.space,a.local))}a=d3.ns.qualify(a);return this.select(a.local?c:b)};D.insert=function(a,b){function c(){return this.insertBefore(document.createElementNS(this.namespaceURI,a),Ja(b,this))}function d(){return this.insertBefore(document.createElementNS(a.space,
a.local),Ja(b,this))}a=d3.ns.qualify(a);return this.select(a.local?d:c)};D.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};D.data=function(a,b){function c(a,c){var d,f=a.length,g=c.length,k=Math.min(f,g),l=Math.max(f,g),n=[],q=[],r=[],s,A;if(b){var k=new h,l=[],B;A=c.length;for(d=-1;++d<f;)B=b.call(s=a[d],s.__data__,d),k.has(B)?r[A++]=s:k.set(B,s),l.push(B);for(d=-1;++d<g;)B=b.call(c,A=c[d],d),k.has(B)?(n[d]=s=k.get(B),s.__data__=A,q[d]=r[d]=null):(q[d]=
{__data__:A},n[d]=r[d]=null),k.remove(B);for(d=-1;++d<f;)k.has(l[d])&&(r[d]=a[d])}else{for(d=-1;++d<k;)s=a[d],A=c[d],s?(s.__data__=A,n[d]=s,q[d]=r[d]=null):(q[d]={__data__:A},n[d]=r[d]=null);for(;d<g;++d)q[d]={__data__:c[d]},n[d]=r[d]=null;for(;d<l;++d)r[d]=a[d],q[d]=n[d]=null}q.update=n;q.parentNode=n.parentNode=r.parentNode=a.parentNode;m.push(q);p.push(n);e.push(r)}var d=-1,f=this.length,g,k;if(!arguments.length){for(a=Array(f=(g=this[0]).length);++d<f;)if(k=g[d])a[d]=k.__data__;return a}var m=
zc([]),p=X([]),e=X([]);if("function"===typeof a)for(;++d<f;)c(g=this[d],a.call(g,g.parentNode.__data__,d));else for(;++d<f;)c(g=this[d],a);p.enter=function(){return m};p.exit=function(){return e};return p};D.datum=D.map=function(a){return 1>arguments.length?this.property("__data__"):this.property("__data__",a)};D.filter=function(a){var b=[],c,d,f;"function"!==typeof a&&(a=wc(a));for(var g=0,k=this.length;g<k;g++){b.push(c=[]);c.parentNode=(d=this[g]).parentNode;for(var m=0,p=d.length;m<p;m++)(f=d[m])&&
a.call(f,f.__data__,m)&&c.push(f)}return X(b)};D.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c=this[a],d=c.length-1,f=c[d],g;0<=--d;)if(g=c[d])f&&f!==g.nextSibling&&f.parentNode.insertBefore(g,f),f=g;return this};D.sort=function(a){a=Yd.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};D.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b=!1);for(c in a)this.each(yc(c,a[c],b));return this}if(2>d)return(d=this.node()["__on"+
a])&&d._;c=!1}return this.each(yc(a,b,c))};D.each=function(a){return ta(this,function(b,c,d){a.call(b,b.__data__,c,d)})};D.call=function(a){a.apply(this,(arguments[0]=this,arguments));return this};D.empty=function(){return!this.node()};D.node=function(a){a=0;for(var b=this.length;a<b;a++)for(var c=this[a],d=0,f=c.length;d<f;d++){var g=c[d];if(g)return g}return null};D.transition=function(){for(var a=[],b,c,d=-1,f=this.length;++d<f;){a.push(b=[]);for(var g=this[d],k=-1,m=g.length;++k<m;)b.push((c=
g[k])?{node:c,delay:Na,duration:Oa}:null)}return La(a,da||++ff,Date.now())};var Ca=X([[document]]);Ca[0].parentNode=oa;d3.select=function(a){return"string"===typeof a?Ca.select(a):X([[a]])};d3.selectAll=function(a){return"string"===typeof a?Ca.selectAll(a):X([Aa(a)])};var ca=[];d3.selection.enter=zc;d3.selection.enter.prototype=ca;ca.append=D.append;ca.insert=D.insert;ca.empty=D.empty;ca.node=D.node;ca.select=function(a){for(var b=[],c,d,f,g,k,m=-1,p=this.length;++m<p;){f=(g=this[m]).update;b.push(c=
[]);c.parentNode=g.parentNode;for(var e=-1,h=g.length;++e<h;)(k=g[e])?(c.push(f[e]=d=a.call(g.parentNode,k.__data__,e)),d.__data__=k.__data__):c.push(null)}return X(b)};var O=[],ff=0,da=0,Na=0,Oa=250,Ma=d3.ease("cubic-in-out");O.call=D.call;d3.transition=function(a){return arguments.length?da?a.transition():a:Ca.transition()};d3.transition.prototype=O;O.select=function(a){var b=[],c,d,f;"function"!==typeof a&&(a=oc(a));for(var g=-1,k=this.length;++g<k;){b.push(c=[]);for(var m=this[g],p=-1,e=m.length;++p<
e;)(f=m[p])&&(d=a.call(f.node,f.node.__data__,p))?("__data__"in f.node&&(d.__data__=f.node.__data__),c.push({node:d,delay:f.delay,duration:f.duration})):c.push(null)}return La(b,this.id,this.time).ease(this.ease())};O.selectAll=function(a){var b=[],c,d,f;"function"!==typeof a&&(a=pc(a));for(var g=-1,k=this.length;++g<k;)for(var m=this[g],p=-1,e=m.length;++p<e;)if(f=m[p]){d=a.call(f.node,f.node.__data__,p);b.push(c=[]);for(var h=-1,t=d.length;++h<t;)c.push({node:d[h],delay:f.delay,duration:f.duration})}return La(b,
this.id,this.time).ease(this.ease())};O.filter=function(a){var b=[],c,d,f;"function"!==typeof a&&(a=wc(a));for(var g=0,k=this.length;g<k;g++){b.push(c=[]);d=this[g];for(var m=0,p=d.length;m<p;m++)(f=d[m])&&a.call(f.node,f.node.__data__,m)&&c.push(f)}return La(b,this.id,this.time).ease(this.ease())};O.attr=function(a,b){if(2>arguments.length){for(b in a)this.attrTween(b,d3.tween(a[b],ra(b)));return this}return this.attrTween(a,d3.tween(b,ra(a)))};O.attrTween=function(a,b){function c(a,c){var d=b.call(this,
a,c,this.getAttribute(f));return d===ua?(this.removeAttribute(f),null):d&&function(a){this.setAttribute(f,d(a))}}function d(a,c){var d=b.call(this,a,c,this.getAttributeNS(f.space,f.local));return d===ua?(this.removeAttributeNS(f.space,f.local),null):d&&function(a){this.setAttributeNS(f.space,f.local,d(a))}}var f=d3.ns.qualify(a);return this.tween("attr."+a,f.local?d:c)};O.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b="");for(c in a)this.styleTween(c,d3.tween(a[c],
ra(c)),b);return this}c=""}return this.styleTween(a,d3.tween(b,ra(a)),c)};O.styleTween=function(a,b,c){3>arguments.length&&(c="");return this.tween("style."+a,function(d,f){var g=b.call(this,d,f,window.getComputedStyle(this,null).getPropertyValue(a));return g===ua?(this.style.removeProperty(a),null):g&&function(b){this.style.setProperty(a,g(b),c)}})};O.text=function(a){return this.tween("text",function(b,c){this.textContent="function"===typeof a?a.call(this,b,c):a})};O.remove=function(){return this.each("end.transition",
function(){var a;!this.__transition__&&(a=this.parentNode)&&a.removeChild(this)})};O.delay=function(a){return ta(this,"function"===typeof a?function(b,c,d){b.delay=a.call(b=b.node,b.__data__,c,d)|0}:(a|=0,function(b){b.delay=a}))};O.duration=function(a){return ta(this,"function"===typeof a?function(b,c,d){b.duration=Math.max(1,a.call(b=b.node,b.__data__,c,d)|0)}:(a=Math.max(1,a|0),function(b){b.duration=a}))};O.transition=function(){return this.select(n)};d3.tween=function(a,b){function c(c,d,k){c=
a.call(this,c,d);return null==c?""!=k&&ua:k!=c&&b(k,c+"")}function d(c,d,k){return k!=a&&b(k,a)}return"function"===typeof a?c:null==a?$d:(a+="",d)};var ua={},gf=0,yb={},ma=null,Qa,Pa;d3.timer=function(a,b,c){if(3>arguments.length){if(2>arguments.length)b=0;else if(!isFinite(b))return;c=Date.now()}var d=yb[a.id];d&&d.callback===a?(d.then=c,d.delay=b):yb[a.id=++gf]=ma={callback:a,then:c,delay:b,next:ma};Qa||(Pa=clearTimeout(Pa),Qa=1,Bc(xb))};d3.timer.flush=function(){for(var a,b=Date.now(),c=ma;c;)a=
b-c.then,c.delay||(c.flush=c.callback(a)),c=c.next;Ac()};var Bc=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)};d3.mouse=function(a){return Cc(a,ec())};var zb=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(a,b){2>arguments.length&&(b=ec().touches);return b?Aa(b).map(function(b){var d=Cc(a,b);d.identifier=b.identifier;return d}):[]};d3.scale={};
d3.scale.linear=function(){return Dc([0,1],[0,1],d3.interpolate,!1)};d3.scale.log=function(){return Hc(d3.scale.linear(),Cb)};var de=d3.format(".0e");Cb.pow=function(a){return Math.pow(10,a)};Ta.pow=function(a){return-Math.pow(10,-a)};d3.scale.pow=function(){return Ic(d3.scale.linear(),1)};d3.scale.sqrt=function(){return d3.scale.pow().exponent(0.5)};d3.scale.ordinal=function(){return Jc([],{t:"range",a:[[]]})};d3.scale.category10=function(){return d3.scale.ordinal().range(hf)};d3.scale.category20=
function(){return d3.scale.ordinal().range(jf)};d3.scale.category20b=function(){return d3.scale.ordinal().range(kf)};d3.scale.category20c=function(){return d3.scale.ordinal().range(lf)};var hf="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" "),jf="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" "),kf="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" "),
lf="#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");d3.scale.quantile=function(){return Kc([],[])};d3.scale.quantize=function(){return Lc(0,1,[0,1])};d3.scale.threshold=function(){return Mc([0.5],[0,1])};d3.scale.identity=function(){return Nc([0,1])};d3.svg={};d3.svg.arc=function(){function a(){var a=b.apply(this,arguments),k=c.apply(this,arguments),m=d.apply(this,arguments)+
ea,p=f.apply(this,arguments)+ea,e=(p<m&&(e=m,m=p,p=e),p-m),h=e<Math.PI?"0":"1",t=Math.cos(m),m=Math.sin(m),l=Math.cos(p),p=Math.sin(p);return e>=mf?a?"M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+k+"M0,"+a+"A"+a+","+a+" 0 1,0 0,"+-a+"A"+a+","+a+" 0 1,0 0,"+a+"Z":"M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+k+"Z":a?"M"+k*t+","+k*m+"A"+k+","+k+" 0 "+h+",1 "+k*l+","+k*p+"L"+a*l+","+a*p+"A"+a+","+a+" 0 "+h+",0 "+a*t+","+a*m+"Z":"M"+k*t+","+k*m+"A"+k+","+k+" 0 "+h+",1 "+k*l+
","+k*p+"L0,0Z"}var b=ee,c=fe,d=Oc,f=Pc;a.innerRadius=function(c){if(!arguments.length)return b;b=r(c);return a};a.outerRadius=function(b){if(!arguments.length)return c;c=r(b);return a};a.startAngle=function(b){if(!arguments.length)return d;d=r(b);return a};a.endAngle=function(b){if(!arguments.length)return f;f=r(b);return a};a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,k=(d.apply(this,arguments)+f.apply(this,arguments))/2+ea;return[Math.cos(k)*a,Math.sin(k)*a]};
return a};var ea=-Math.PI/2,mf=2*Math.PI-1E-6;d3.svg.line=function(){return Qc(e)};var Eb=d3.map({linear:P,"linear-closed":function(a){return P(a)+"Z"},"step-before":Fb,"step-after":Gb,basis:Sc,"basis-open":function(a){if(4>a.length)return P(a);for(var b=[],c=-1,d=a.length,f,g=[0],k=[0];3>++c;)f=a[c],g.push(f[0]),k.push(f[1]);b.push(V(na,g)+","+V(na,k));for(--c;++c<d;)f=a[c],g.shift(),g.push(f[0]),k.shift(),k.push(f[1]),wa(b,g,k);return b.join("")},"basis-closed":function(a){for(var b,c=-1,d=a.length,
f=d+4,g,k=[],m=[];4>++c;)g=a[c%d],k.push(g[0]),m.push(g[1]);b=[V(na,k),",",V(na,m)];for(--c;++c<f;)g=a[c%d],k.shift(),k.push(g[0]),m.shift(),m.push(g[1]),wa(b,k,m);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d=a[0][0],f=a[0][1],g=a[c][0]-d,k=a[c][1]-f,m=-1,p,e;++m<=c;)p=a[m],e=m/c,p[0]=b*p[0]+(1-b)*(d+e*g),p[1]=b*p[1]+(1-b)*(f+e*k);return Sc(a)},cardinal:function(a,b,c){return 3>a.length?P(a):a[0]+Va(a,Hb(a,b))},"cardinal-open":function(a,b){return 4>a.length?P(a):a[1]+Va(a.slice(1,
a.length-1),Hb(a,b))},"cardinal-closed":function(a,b){return 3>a.length?P(a):a[0]+Va((a.push(a[0]),a),Hb([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=P(a);else{var b=a[0],c=[],d,f,g,k;d=0;f=a.length-1;var m=[];g=a[1];for(k=m[0]=Ib(a[0],g);++d<f;)m[d]=(k+(k=Ib(g,g=a[d+1])))/2;m[d]=k;for(var p=-1,e=a.length-1;++p<e;)d=Ib(a[p],a[p+1]),1E-6>Math.abs(d)?m[p]=m[p+1]=0:(f=m[p]/d,g=m[p+1]/d,k=f*f+g*g,9<k&&(k=3*d/Math.sqrt(k),m[p]=k*f,m[p+1]=k*g));for(p=-1;++p<=e;)k=(a[Math.min(e,
p+1)][0]-a[Math.max(0,p-1)][0])/(6*(1+m[p]*m[p])),c.push([k||0,m[p]*k||0]);a=b+Va(a,c)}return a}});Eb.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Tc=[0,2/3,1/3,0],Uc=[0,1/3,2/3,0],na=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var a=Qc(Vc);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Fb.reverse=Gb;Gb.reverse=Fb;d3.svg.area=function(){return Wc(e)};d3.svg.area.radial=function(){var a=Wc(Vc);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;
delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};d3.svg.chord=function(){function a(a,f){var g=b(this,c,a,f),k=b(this,d,a,f);return"M"+g.p0+("A"+g.r+","+g.r+" 0 "+ +(g.a1-g.a0>Math.PI)+",1 "+g.p1)+(g.a0==k.a0&&g.a1==k.a1?"Q 0,0 "+g.p0:"Q 0,0 "+k.p0+("A"+k.r+","+k.r+" 0 "+ +(k.a1-k.a0>Math.PI)+",1 "+k.p1)+("Q 0,0 "+g.p0))+"Z"}function b(a,b,c,d){var e=b.call(a,c,d);b=f.call(a,e,d);c=g.call(a,e,d)+ea;a=k.call(a,e,d)+ea;return{r:b,a0:c,a1:a,p0:[b*
Math.cos(c),b*Math.sin(c)],p1:[b*Math.cos(a),b*Math.sin(a)]}}var c=Yc,d=Zc,f=ge,g=Oc,k=Pc;a.radius=function(b){if(!arguments.length)return f;f=r(b);return a};a.source=function(b){if(!arguments.length)return c;c=r(b);return a};a.target=function(b){if(!arguments.length)return d;d=r(b);return a};a.startAngle=function(b){if(!arguments.length)return g;g=r(b);return a};a.endAngle=function(b){if(!arguments.length)return k;k=r(b);return a};return a};d3.svg.diagonal=function(){function a(a,g){var k=b.call(this,
a,g),m=c.call(this,a,g),p=(k.y+m.y)/2,k=[k,{x:k.x,y:p},{x:m.x,y:p},m],k=k.map(d);return"M"+k[0]+"C"+k[1]+" "+k[2]+" "+k[3]}var b=Yc,c=Zc,d=$c;a.source=function(c){if(!arguments.length)return b;b=r(c);return a};a.target=function(b){if(!arguments.length)return c;c=r(b);return a};a.projection=function(b){if(!arguments.length)return d;d=b;return a};return a};d3.svg.diagonal.radial=function(){var a=d3.svg.diagonal(),b=$c,c=a.projection;a.projection=function(a){return arguments.length?c(he(b=a)):b};return a};
d3.svg.mouse=d3.mouse;d3.svg.touches=d3.touches;d3.svg.symbol=function(){function a(a,f){return(Ed.get(b.call(this,a,f))||ad)(c.call(this,a,f))}var b=je,c=ie;a.type=function(c){if(!arguments.length)return b;b=r(c);return a};a.size=function(b){if(!arguments.length)return c;c=r(b);return a};return a};var Ed=d3.map({circle:ad,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/
(2*Fd));var b=a*Fd;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/fb);var b=a*fb/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/fb);var b=a*fb/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});d3.svg.symbolTypes=Ed.keys();var fb=Math.sqrt(3),Fd=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function a(a){a.each(function(){var a=
d3.select(this),t=null==p?b.ticks?b.ticks.apply(b,m):b.domain():p,l=null==e?b.tickFormat?b.tickFormat.apply(b,m):String:e,n=ke(b,t,h),q=a.selectAll(".minor").data(n,String),n=q.enter().insert("line","g").attr("class","tick minor").style("opacity",1E-6),r=d3.transition(q.exit()).style("opacity",1E-6).remove(),q=d3.transition(q).style("opacity",1),s=a.selectAll("g").data(t,String),t=s.enter().insert("g","path").style("opacity",1E-6),C=d3.transition(s.exit()).style("opacity",1E-6).remove(),w=d3.transition(s).style("opacity",
1),A,B=Ra(b),a=a.selectAll(".domain").data([0]);a.enter().append("path").attr("class","domain");var a=d3.transition(a),J=b.copy(),G=this.__chart__||J;this.__chart__=J;t.append("line").attr("class","tick");t.append("text");var y=t.select("line"),pa=w.select("line"),l=s.select("text").text(l),s=t.select("text"),E=w.select("text");switch(c){case "bottom":A=bd;n.attr("y2",f);q.attr("x2",0).attr("y2",f);y.attr("y2",d);s.attr("y",Math.max(d,0)+k);pa.attr("x2",0).attr("y2",d);E.attr("x",0).attr("y",Math.max(d,
0)+k);l.attr("dy",".71em").attr("text-anchor","middle");a.attr("d","M"+B[0]+","+g+"V0H"+B[1]+"V"+g);break;case "top":A=bd;n.attr("y2",-f);q.attr("x2",0).attr("y2",-f);y.attr("y2",-d);s.attr("y",-(Math.max(d,0)+k));pa.attr("x2",0).attr("y2",-d);E.attr("x",0).attr("y",-(Math.max(d,0)+k));l.attr("dy","0em").attr("text-anchor","middle");a.attr("d","M"+B[0]+","+-g+"V0H"+B[1]+"V"+-g);break;case "left":A=cd;n.attr("x2",-f);q.attr("x2",-f).attr("y2",0);y.attr("x2",-d);s.attr("x",-(Math.max(d,0)+k));pa.attr("x2",
-d).attr("y2",0);E.attr("x",-(Math.max(d,0)+k)).attr("y",0);l.attr("dy",".32em").attr("text-anchor","end");a.attr("d","M"+-g+","+B[0]+"H0V"+B[1]+"H"+-g);break;case "right":A=cd,n.attr("x2",f),q.attr("x2",f).attr("y2",0),y.attr("x2",d),s.attr("x",Math.max(d,0)+k),pa.attr("x2",d).attr("y2",0),E.attr("x",Math.max(d,0)+k).attr("y",0),l.attr("dy",".32em").attr("text-anchor","start"),a.attr("d","M"+g+","+B[0]+"H0V"+B[1]+"H"+g)}if(b.ticks)t.call(A,G),w.call(A,J),C.call(A,J),n.call(A,G),q.call(A,J),r.call(A,
J);else{var nf=J.rangeBand()/2,n=function(a){return J(a)+nf};t.call(A,n);w.call(A,n)}})}var b=d3.scale.linear(),c="bottom",d=6,f=6,g=6,k=3,m=[10],p=null,e,h=0;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return c;c=b;return a};a.ticks=function(){if(!arguments.length)return m;m=arguments;return a};a.tickValues=function(b){if(!arguments.length)return p;p=b;return a};a.tickFormat=function(b){if(!arguments.length)return e;e=b;return a};a.tickSize=
function(b,c,k){if(!arguments.length)return d;var m=arguments.length-1;d=+b;f=1<m?+c:d;g=0<m?+arguments[m]:d;return a};a.tickPadding=function(b){if(!arguments.length)return k;k=+b;return a};a.tickSubdivide=function(b){if(!arguments.length)return h;h=+b;return a};return a};d3.svg.brush=function(){function a(g){g.each(function(){var g=d3.select(this),h=g.selectAll(".background").data([0]),l=g.selectAll(".extent").data([0]),t=g.selectAll(".resize").data(e,String);g.style("pointer-events","all").on("mousedown.brush",
f).on("touchstart.brush",f);h.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");l.enter().append("rect").attr("class","extent").style("cursor","move");t.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return of[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");t.style("display",
a.empty()?"none":null);t.exit().remove();k&&(l=Ra(k),h.attr("x",l[0]).attr("width",l[1]-l[0]),c(g));m&&(l=Ra(m),h.attr("y",l[0]).attr("height",l[1]-l[0]),d(g));b(g)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+h[+/e$/.test(a)][0]+","+h[+/^s/.test(a)][1]+")"})}function c(a){a.select(".extent").attr("x",h[0][0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1][0]-h[0][0])}function d(a){a.select(".extent").attr("y",h[0][1]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",
h[1][1]-h[0][1])}function f(){function f(){var a=d3.event.changedTouches;return a?d3.touches(z,a)[0]:d3.mouse(z)}function e(){var a=f(),g=!1;y&&(a[0]+=y[0],a[1]+=y[1]);B||(d3.event.altKey?(J||(J=[(h[0][0]+h[1][0])/2,(h[0][1]+h[1][1])/2]),G[0]=h[+(a[0]<J[0])][0],G[1]=h[+(a[1]<J[1])][1]):J=null);w&&p(a,k,0)&&(c(s),g=!0);A&&p(a,m,1)&&(d(s),g=!0);g&&(b(s),r({type:"brush",mode:B?"move":"resize"}))}function p(a,b,c){var d=Ra(b);b=d[0];var f=d[1],d=G[c],g=h[1][c]-h[0][c];B&&(b-=d,f-=g+d);a=Math.max(b,Math.min(f,
a[c]));B?b=(a+=d)+g:(J&&(d=Math.max(b,Math.min(f,2*J[c]-a))),d<a?(b=a,a=d):b=d);if(h[0][c]!==a||h[1][c]!==b)return l=null,h[0][c]=a,h[1][c]=b,!0}function n(){e();s.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);d3.select("body").style("cursor",null);pa.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);r({type:"brushend"});Q()}var z=this,q=d3.select(d3.event.target),
r=g.of(z,arguments),s=d3.select(z),C=q.datum(),w=!/^(n|s)$/.test(C)&&k,A=!/^(e|w)$/.test(C)&&m,B=q.classed("extent"),J,G=f(),y,pa=d3.select(window).on("mousemove.brush",e).on("mouseup.brush",n).on("touchmove.brush",e).on("touchend.brush",n).on("keydown.brush",function(){32==d3.event.keyCode&&(B||(J=null,G[0]-=h[1][0],G[1]-=h[1][1],B=2),Q())}).on("keyup.brush",function(){32==d3.event.keyCode&&2==B&&(G[0]+=h[1][0],G[1]+=h[1][1],B=0,Q())});if(B)G[0]=h[0][0]-G[0],G[1]=h[0][1]-G[1];else if(C){var E=+/w$/.test(C),
C=+/^n/.test(C);y=[h[1-E][0]-G[0],h[1-C][1]-G[1]];G[0]=h[E][0];G[1]=h[C][1]}else d3.event.altKey&&(J=G.slice());s.style("pointer-events","none").selectAll(".resize").style("display",null);d3.select("body").style("cursor",q.style("cursor"));r({type:"brushstart"});e();Q()}var g=mb(a,"brushstart","brush","brushend"),k=null,m=null,e=bc[0],h=[[0,0],[0,0]],l;a.x=function(b){if(!arguments.length)return k;k=b;e=bc[!k<<1|!m];return a};a.y=function(b){if(!arguments.length)return m;m=b;e=bc[!k<<1|!m];return a};
a.extent=function(b){var c,d,f,g,e;if(!arguments.length)return b=l||h,k&&(c=b[0][0],d=b[1][0],l||(c=h[0][0],d=h[1][0],k.invert&&(c=k.invert(c),d=k.invert(d)),d<c&&(e=c,c=d,d=e))),m&&(f=b[0][1],g=b[1][1],l||(f=h[0][1],g=h[1][1],m.invert&&(f=m.invert(f),g=m.invert(g)),g<f&&(e=f,f=g,g=e))),k&&m?[[c,f],[d,g]]:k?[c,d]:m&&[f,g];l=[[0,0],[0,0]];k&&(c=b[0],d=b[1],m&&(c=c[0],d=d[0]),l[0][0]=c,l[1][0]=d,k.invert&&(c=k(c),d=k(d)),d<c&&(e=c,c=d,d=e),h[0][0]=c|0,h[1][0]=d|0);m&&(f=b[0],g=b[1],k&&(f=f[1],g=g[1]),
l[0][1]=f,l[1][1]=g,m.invert&&(f=m(f),g=m(g)),g<f&&(e=f,f=g,g=e),h[0][1]=f|0,h[1][1]=g|0);return a};a.clear=function(){l=null;h[0][0]=h[0][1]=h[1][0]=h[1][1]=0;return a};a.empty=function(){return k&&h[0][0]===h[1][0]||m&&h[0][1]===h[1][1]};return d3.rebind(a,g,"on")};var of={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},bc=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]];d3.behavior={};d3.behavior.drag=function(){function a(){this.on("mousedown.drag",
b).on("touchstart.drag",b)}function b(){function a(){var b=m.parentNode;return l?d3.touches(b).filter(function(a){return a.identifier===l})[0]:d3.mouse(b)}function b(){e({type:"dragend"});if(v&&(Q(),d3.event.target===h))q.on("click.drag",k,!0);q.on(l?"touchmove.drag-"+l:"mousemove.drag",null).on(l?"touchend.drag-"+l:"mouseup.drag",null)}function k(){Q();q.on("click.drag",null)}var m=this,e=c.of(m,arguments),h=d3.event.target,l=d3.event.touches&&d3.event.changedTouches[0].identifier,t,n=a(),v=0,q=
d3.select(window).on(l?"touchmove.drag-"+l:"mousemove.drag",function(){if(!m.parentNode)return b();var c=a(),d=c[0]-n[0],k=c[1]-n[1];v|=d|k;n=c;Q();e({type:"drag",x:c[0]+t[0],y:c[1]+t[1],dx:d,dy:k})}).on(l?"touchend.drag-"+l:"mouseup.drag",b,!0);d?(t=d.apply(m,arguments),t=[t.x-n[0],t.y-n[1]]):t=[0,0];l||Q();e({type:"dragstart"})}var c=mb(a,"drag","dragstart","dragend"),d=null;a.origin=function(b){if(!arguments.length)return d;d=b;return a};return d3.rebind(a,c,"on")};d3.behavior.zoom=function(){function a(){this.on("mousedown.zoom",
g).on("mousewheel.zoom",k).on("mousemove.zoom",m).on("DOMMouseScroll.zoom",k).on("dblclick.zoom",e).on("touchstart.zoom",h).on("touchmove.zoom",l).on("touchend.zoom",h)}function b(a){return[(a[0]-t[0])/v,(a[1]-t[1])/v]}function c(a){v=Math.max(s[0],Math.min(s[1],a))}function d(a,b){b=[b[0]*v+t[0],b[1]*v+t[1]];t[0]+=a[0]-b[0];t[1]+=a[1]-b[1]}function f(a){I&&I.domain(w.range().map(function(a){return(a-t[0])/v}).map(w.invert));S&&S.domain(C.range().map(function(a){return(a-t[1])/v}).map(C.invert));
d3.event.preventDefault();a({type:"zoom",scale:v,translate:t})}function g(){function a(){Q();e.on("click.zoom",null)}var c=this,g=r.of(c,arguments),k=d3.event.target,m=0,e=d3.select(window).on("mousemove.zoom",function(){m=1;d(d3.mouse(c),p);f(g)}).on("mouseup.zoom",function(){m&&Q();e.on("mousemove.zoom",null).on("mouseup.zoom",null);if(m&&d3.event.target===k)e.on("click.zoom",a,!0)}),p=b(d3.mouse(c));window.focus();Q()}function k(){n||(n=b(d3.mouse(this)));c(Math.pow(2,0.0020*le())*v);d(d3.mouse(this),
n);f(r.of(this,arguments))}function m(){n=null}function e(){var a=d3.mouse(this),g=b(a);c(d3.event.shiftKey?v/2:2*v);d(a,g);f(r.of(this,arguments))}function h(){var a=d3.touches(this),g=Date.now();q=v;n={};a.forEach(function(a){n[a.identifier]=b(a)});Q();if(1===a.length){if(500>g-A){var k=a[0],a=b(a[0]);c(2*v);d(k,a);f(r.of(this,arguments))}A=g}}function l(){var a=d3.touches(this),b=a[0],g=n[b.identifier];if(a=a[1]){var k=n[a.identifier],b=[(b[0]+a[0])/2,(b[1]+a[1])/2],g=[(g[0]+k[0])/2,(g[1]+k[1])/
2];c(d3.event.scale*q)}d(b,g);A=null;f(r.of(this,arguments))}var t=[0,0],n,v=1,q,s=Gd,r=mb(a,"zoom"),w,I,C,S,A;a.translate=function(b){if(!arguments.length)return t;t=b.map(Number);return a};a.scale=function(b){if(!arguments.length)return v;v=+b;return a};a.scaleExtent=function(b){if(!arguments.length)return s;s=null==b?Gd:b.map(Number);return a};a.x=function(b){if(!arguments.length)return I;I=b;w=b.copy();return a};a.y=function(b){if(!arguments.length)return S;S=b;C=b.copy();return a};return d3.rebind(a,
r,"on")};var xa,Gd=[0,Infinity];d3.layout={};d3.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(me(a[c]));return b}};d3.layout.chord=function(){function a(){var a={},c=[],n=d3.range(k),q=[],r,s,w,I,C;d=[];f=[];r=0;for(I=-1;++I<k;){s=0;for(C=-1;++C<k;)s+=g[I][C];c.push(s);q.push(d3.range(k));r+=s}e&&n.sort(function(a,b){return e(c[a],c[b])});h&&q.forEach(function(a,b){a.sort(function(a,c){return h(g[b][a],g[b][c])})});r=(2*Math.PI-m*k)/r;s=0;for(I=-1;++I<k;){w=
s;for(C=-1;++C<k;){var S=n[I],A=q[S][C],B=g[S][A],y=s,G=s+=B*r;a[S+"-"+A]={index:S,subindex:A,startAngle:y,endAngle:G,value:B}}f[S]={index:S,startAngle:w,endAngle:s,value:(s-w)/r};s+=m}for(I=-1;++I<k;)for(C=I-1;++C<k;)if(n=a[I+"-"+C],q=a[C+"-"+I],n.value||q.value)d.push(n.value<q.value?{source:q,target:n}:{source:n,target:q});l&&b()}function b(){d.sort(function(a,b){return l((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c={},d,f,g,k,m=0,e,h,l;c.matrix=function(a){if(!arguments.length)return g;
k=(g=a)&&g.length;d=f=null;return c};c.padding=function(a){if(!arguments.length)return m;m=a;d=f=null;return c};c.sortGroups=function(a){if(!arguments.length)return e;e=a;d=f=null;return c};c.sortSubgroups=function(a){if(!arguments.length)return h;h=a;d=null;return c};c.sortChords=function(a){if(!arguments.length)return l;l=a;d&&b();return c};c.chords=function(){d||a();return d};c.groups=function(){f||a();return f};return c};d3.layout.force=function(){function a(a){return function(b,c,d,f,g){if(b.point!==
a){d=b.cx-a.x;g=b.cy-a.y;var k=1/Math.sqrt(d*d+g*g);if((f-c)*k<q)return c=b.charge*k*k,a.px-=d*c,a.py-=g*c,!0;b.point&&isFinite(k)&&(c=b.pointCharge*k*k,a.px-=d*c,a.py-=g*c)}return!b.charge}}function b(a){a.px=d3.event.x;a.py=d3.event.y;c.resume()}var c={},d=d3.dispatch("start","tick","end"),f=[1,1],g,k,m=0.9,h=re,l=se,n=-30,t=0.1,q=0.8,v=[],s=[],z,w,K;c.tick=function(){if(0.0050>(k*=0.99))return d.end({type:"end",alpha:k=0}),!0;var b=v.length,c=s.length,g,e,h,p,l,u,q;for(g=0;g<c;++g)if(e=s[g],h=
e.source,p=e.target,u=p.x-h.x,q=p.y-h.y,l=u*u+q*q)l=k*w[g]*((l=Math.sqrt(l))-z[g])/l,u*=l,q*=l,p.x-=u*(l=h.weight/(p.weight+h.weight)),p.y-=q*l,h.x+=u*(l=1-l),h.y+=q*l;if(l=k*t)if(u=f[0]/2,q=f[1]/2,g=-1,l)for(;++g<b;)e=v[g],e.x+=(u-e.x)*l,e.y+=(q-e.y)*l;if(n){ed(c=d3.geom.quadtree(v),k,K);for(g=-1;++g<b;)(e=v[g]).fixed||c.visit(a(e))}for(g=-1;++g<b;)e=v[g],e.fixed?(e.x=e.px,e.y=e.py):(e.x-=(e.px-(e.px=e.x))*m,e.y-=(e.py-(e.py=e.y))*m);d.tick({type:"tick",alpha:k})};c.nodes=function(a){if(!arguments.length)return v;
v=a;return c};c.links=function(a){if(!arguments.length)return s;s=a;return c};c.size=function(a){if(!arguments.length)return f;f=a;return c};c.linkDistance=function(a){if(!arguments.length)return h;h=r(a);return c};c.distance=c.linkDistance;c.linkStrength=function(a){if(!arguments.length)return l;l=r(a);return c};c.friction=function(a){if(!arguments.length)return m;m=a;return c};c.charge=function(a){if(!arguments.length)return n;n="function"===typeof a?a:+a;return c};c.gravity=function(a){if(!arguments.length)return t;
t=a;return c};c.theta=function(a){if(!arguments.length)return q;q=a;return c};c.alpha=function(a){if(!arguments.length)return k;k?k=0<a?a:0:0<a&&(d.start({type:"start",alpha:k=a}),d3.timer(c.tick));return c};c.start=function(){function a(c,f){var m;if(!t){t=[];for(d=0;d<g;++d)t[d]=[];for(d=0;d<k;++d)m=s[d],t[m.source.index].push(m.target),t[m.target.index].push(m.source)}m=t[b];for(var e=-1,h=m.length,p;++e<h;)if(!isNaN(p=m[e][c]))return p;return Math.random()*f}var b,d,g=v.length,k=s.length,m=f[0],
e=f[1],t,q;for(b=0;b<g;++b)(q=v[b]).index=b,q.weight=0;z=[];w=[];for(b=0;b<k;++b)q=s[b],"number"==typeof q.source&&(q.source=v[q.source]),"number"==typeof q.target&&(q.target=v[q.target]),z[b]=h.call(this,q,b),w[b]=l.call(this,q,b),++q.source.weight,++q.target.weight;for(b=0;b<g;++b)q=v[b],isNaN(q.x)&&(q.x=a("x",m)),isNaN(q.y)&&(q.y=a("y",e)),isNaN(q.px)&&(q.px=q.x),isNaN(q.py)&&(q.py=q.y);K=[];if("function"===typeof n)for(b=0;b<g;++b)K[b]=+n.call(this,v[b],b);else for(b=0;b<g;++b)K[b]=n;return c.resume()};
c.resume=function(){return c.alpha(0.1)};c.stop=function(){return c.alpha(0)};c.drag=function(){g||(g=d3.behavior.drag().origin(e).on("dragstart",ne).on("drag",b).on("dragend",oe));this.on("mouseover.force",pe).on("mouseout.force",qe).call(g)};return d3.rebind(c,d,"on")};d3.layout.partition=function(){function a(b,c,d,f){var e=b.children;b.x=c;b.y=b.depth*f;b.dx=d;b.dy=f;if(e&&(l=e.length)){var h=-1,l,n;for(d=b.value?d/b.value:0;++h<l;)a(n=e[h],c,b=n.value*d,f),c+=b}}function b(a){a=a.children;var c=
0;if(a&&(f=a.length))for(var d=-1,f;++d<f;)c=Math.max(c,b(a[d]));return 1+c}function c(c,k){var m=d.call(this,c,k);a(m[0],0,f[0],f[1]/b(m[0]));return m}var d=d3.layout.hierarchy(),f=[1,1];c.size=function(a){if(!arguments.length)return f;f=a;return c};return ya(c,d)};d3.layout.pie=function(){function a(g,k){var m=g.map(function(c,d){return+b.call(a,c,d)}),e=+("function"===typeof d?d.apply(this,arguments):d),h=(("function"===typeof f?f.apply(this,arguments):f)-d)/d3.sum(m),l=d3.range(g.length);null!=
c&&l.sort(c===Hd?function(a,b){return m[b]-m[a]}:function(a,b){return c(g[a],g[b])});var n=[];l.forEach(function(a){var b;n[a]={data:g[a],value:b=m[a],startAngle:e,endAngle:e+=b*h}});return n}var b=Number,c=Hd,d=0,f=2*Math.PI;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.sort=function(b){if(!arguments.length)return c;c=b;return a};a.startAngle=function(b){if(!arguments.length)return d;d=b;return a};a.endAngle=function(b){if(!arguments.length)return f;f=b;return a};return a};var Hd=
{};d3.layout.stack=function(){function a(m,e){var h=m.map(function(c,d){return b.call(a,c,d)}),l=h.map(function(b,c){return b.map(function(b,c){return[g.call(a,b,c),k.call(a,b,c)]})}),n=c.call(a,l,e),h=d3.permute(h,n),l=d3.permute(l,n),n=d.call(a,l,e),q=h.length,v=h[0].length,s,r,w;for(r=0;r<v;++r){f.call(a,h[0][r],w=n[r],l[0][r][1]);for(s=1;s<q;++s)f.call(a,h[s][r],w+=l[s-1][r][1],l[s][r][1])}return m}var b=e,c=Jb,d=Kb,f=ve,g=te,k=ue;a.values=function(c){if(!arguments.length)return b;b=c;return a};
a.order=function(b){if(!arguments.length)return c;c="function"===typeof b?b:pf.get(b)||Jb;return a};a.offset=function(b){if(!arguments.length)return d;d="function"===typeof b?b:qf.get(b)||Kb;return a};a.x=function(b){if(!arguments.length)return g;g=b;return a};a.y=function(b){if(!arguments.length)return k;k=b;return a};a.out=function(b){if(!arguments.length)return f;f=b;return a};return a};var pf=d3.map({"inside-out":function(a){var b=a.length,c,d=a.map(we),f=a.map(xe),g=d3.range(b).sort(function(a,
b){return d[a]-d[b]}),k=0,m=0,e=[],h=[];for(a=0;a<b;++a)c=g[a],k<m?(k+=f[c],e.push(c)):(m+=f[c],h.push(c));return h.reverse().concat(e)},reverse:function(a){return d3.range(a.length).reverse()},"default":Jb}),qf=d3.map({silhouette:function(a){var b=a.length,c=a[0].length,d=[],f=0,g,k,m,e=[];for(k=0;k<c;++k){for(m=g=0;g<b;g++)m+=a[g][k][1];m>f&&(f=m);d.push(m)}for(k=0;k<c;++k)e[k]=(f-d[k])/2;return e},wiggle:function(a){var b=a.length,c=a[0],d=c.length,f,g,k,m,e,h,l,n,q,v=[];v[0]=n=q=0;for(g=1;g<d;++g){for(m=
f=0;f<b;++f)m+=a[f][g][1];e=f=0;for(l=c[g][0]-c[g-1][0];f<b;++f){k=0;for(h=(a[f][g][1]-a[f][g-1][1])/(2*l);k<f;++k)h+=(a[k][g][1]-a[k][g-1][1])/l;e+=h*a[f][g][1]}v[g]=n-=m?e/m*l:0;n<q&&(q=n)}for(g=0;g<d;++g)v[g]-=q;return v},expand:function(a){var b=a.length,c=a[0].length,d=1/b,f,g,k,m=[];for(g=0;g<c;++g){for(k=f=0;f<b;f++)k+=a[f][g][1];if(k)for(f=0;f<b;f++)a[f][g][1]/=k;else for(f=0;f<b;f++)a[f][g][1]=d}for(g=0;g<c;++g)m[g]=0;return m},zero:Kb});d3.layout.histogram=function(){function a(a,k){var m=
[],e=a.map(c,this),h=d.call(this,e,k),l=f.call(this,h,e,k),n;k=-1;for(var q=e.length,v=l.length-1,s=b?1:1/q;++k<v;)n=m[k]=[],n.dx=l[k+1]-(n.x=l[k]),n.y=0;if(0<v)for(k=-1;++k<q;)n=e[k],n>=h[0]&&n<=h[1]&&(n=m[d3.bisect(l,n,1,v)-1],n.y+=s,n.push(a[k]));return m}var b=!0,c=Number,d=Ae,f=ze;a.value=function(b){if(!arguments.length)return c;c=b;return a};a.range=function(b){if(!arguments.length)return d;d=r(b);return a};a.bins=function(b){if(!arguments.length)return f;f="number"===typeof b?function(a){return fd(a,
b)}:r(b);return a};a.frequency=function(c){if(!arguments.length)return b;b=!!c;return a};return a};d3.layout.hierarchy=function(){function a(b,m,e){var h=f.call(c,b,m),l=Lb?b:{data:b};l.depth=m;e.push(l);if(h&&(n=h.length)){b=-1;var n,q=l.children=[],v=0;m+=1;for(var s;++b<n;)s=a(h[b],m,e),s.parent=l,q.push(s),v+=s.value;d&&q.sort(d);g&&(l.value=v)}else g&&(l.value=+g.call(c,b,m)||0);return l}function b(a,d){var f=a.children,e=0;if(f&&(l=f.length))for(var h=-1,l,n=d+1;++h<l;)e+=b(f[h],n);else g&&
(e=+g.call(c,Lb?a:a.data,d)||0);g&&(a.value=e);return e}function c(b){var c=[];a(b,0,c);return c}var d=Ee,f=Ce,g=De;c.sort=function(a){if(!arguments.length)return d;d=a;return c};c.children=function(a){if(!arguments.length)return f;f=a;return c};c.value=function(a){if(!arguments.length)return g;g=a;return c};c.revalue=function(a){b(a,0);return a};return c};var Lb=!1;d3.layout.pack=function(){function a(a,g){var k=b.call(this,a,g),m=k[0];m.x=0;m.y=0;Z(m,function(a){a.r=Math.sqrt(a.value)});Z(m,id);
var e=d[0],h=d[1],l=Math.max(2*m.r/e,2*m.r/h);if(0<c){var n=c*l/2;Z(m,function(a){a.r+=n});Z(m,id);Z(m,function(a){a.r-=n});l=Math.max(2*m.r/e,2*m.r/h)}kd(m,e/2,h/2,1/l);return k}var b=d3.layout.hierarchy().sort(Fe),c=0,d=[1,1];a.size=function(b){if(!arguments.length)return d;d=b;return a};a.padding=function(b){if(!arguments.length)return c;c=+b;return a};return ya(a,b)};d3.layout.cluster=function(){function a(a,g){var k=b.call(this,a,g),m=k[0],e,h=0;Z(m,function(a){var b=a.children;b&&b.length?(a.x=
Je(b),a.y=Ie(b)):(a.x=e?h+=c(a,e):0,a.y=0,e=a)});var l=ld(m),n=md(m),q=l.x-c(l,n)/2,v=n.x+c(n,l)/2;Z(m,function(a){a.x=(a.x-q)/(v-q)*d[0];a.y=(1-(m.y?a.y/m.y:1))*d[1]});return k}var b=d3.layout.hierarchy().sort(null).value(null),c=nd,d=[1,1];a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return d;d=b;return a};return ya(a,b)};d3.layout.tree=function(){function a(a,g){function k(a,b){var d=a.children,f=a._tree;if(d&&(g=d.length)){for(var g,
m=d[0],e,h=m,l,p=-1;++p<g;){l=d[p];k(l,e);var n=l;if(e){for(var t=n,q=n,v=n.parent.children[0],u=t._tree.mod,s=q._tree.mod,r=e._tree.mod,F=v._tree.mod,z=void 0;e=Ob(e),t=Nb(t),e&&t;){v=Nb(v);q=Ob(q);q._tree.ancestor=n;z=e._tree.prelim+r-t._tree.prelim-u+c(e,t);if(0<z){var w=e._tree.ancestor.parent==n.parent?e._tree.ancestor:h,T=n,Ka=z,w=w._tree,T=T._tree,y=Ka/(T.number-w.number);w.change+=y;T.change-=y;T.shift+=Ka;T.prelim+=Ka;T.mod+=Ka;u+=z;s+=z}r+=e._tree.mod;u+=t._tree.mod;F+=v._tree.mod;s+=q._tree.mod}e&&
!Ob(q)&&(q._tree.thread=e,q._tree.mod+=r-s);t&&!Nb(v)&&(v._tree.thread=t,v._tree.mod+=u-F,h=n)}e=l}g=d=0;p=a.children;for(n=p.length;0<=--n;)h=p[n]._tree,h.prelim+=d,h.mod+=d,d+=h.shift+(g+=h.change);m=0.5*(m._tree.prelim+l._tree.prelim);b?(f.prelim=b._tree.prelim+c(a,b),f.mod=f.prelim-m):f.prelim=m}else b&&(f.prelim=b._tree.prelim+c(a,b))}function m(a,b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(f=c.length)){var d=-1,f;for(b+=a._tree.mod;++d<f;)m(c[d],b)}}var e=b.call(this,a,g),h=e[0];Z(h,function(a,
b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}});k(h);m(h,-h._tree.prelim);var l=Wa(h,Le),n=Wa(h,Ke),q=Wa(h,Me),v=l.x-c(l,n)/2,s=n.x+c(n,l)/2,r=q.depth||1;Z(h,function(a){a.x=(a.x-v)/(s-v)*d[0];a.y=a.depth/r*d[1];delete a._tree});return e}var b=d3.layout.hierarchy().sort(null).value(null),c=nd,d=[1,1];a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return d;d=b;return a};return ya(a,b)};d3.layout.treemap=
function(){function a(a,b){for(var c=-1,d=a.length,f,g;++c<d;)g=(f=a[c]).value*(0>b?0:b),f.area=isNaN(g)||0>=g?0:g}function b(c){var f=c.children;if(f&&f.length){var g=h(c),k=[],m=f.slice(),e=Infinity,l=Math.min(g.dx,g.dy);a(m,g.dx*g.dy/c.value);for(k.area=0;0<(c=m.length);){k.push(c=m[c-1]);k.area+=c.area;c=l;for(var n=k.area,p=void 0,t=0,s=Infinity,r=-1,w=k.length;++r<w;)if(p=k[r].area)p<s&&(s=p),p>t&&(t=p);n*=n;c*=c;(c=n?Math.max(c*t*q/n,n/(c*s*q)):Infinity)<=e?(m.pop(),e=c):(k.area-=k.pop().area,
d(k,l,g,!1),l=Math.min(g.dx,g.dy),k.length=k.area=0,e=Infinity)}k.length&&(d(k,l,g,!0),k.length=k.area=0);f.forEach(b)}}function c(b){var f=b.children;if(f&&f.length){var g=h(b),k=f.slice(),m=[];a(k,g.dx*g.dy/b.value);for(m.area=0;b=k.pop();)m.push(b),m.area+=b.area,null!=b.z&&(d(m,b.z?g.dx:g.dy,g,!k.length),m.length=m.area=0);f.forEach(c)}}function d(a,b,c,d){var f=-1,g=a.length,m=c.x,e=c.y,h=b?k(a.area/b):0,l;if(b==c.dx){if(d||h>c.dy)h=c.dy;for(;++f<g;)l=a[f],l.x=m,l.y=e,l.dy=h,m+=l.dx=Math.min(c.x+
c.dx-m,h?k(l.area/h):0);l.z=!0;l.dx+=c.x+c.dx-m;c.y+=h;c.dy-=h}else{if(d||h>c.dx)h=c.dx;for(;++f<g;)l=a[f],l.x=m,l.y=e,l.dx=h,e+=l.dy=Math.min(c.y+c.dy-e,h?k(l.area/h):0);l.z=!1;l.dy+=c.y+c.dy-e;c.x+=h;c.dx-=h}}function f(d){d=n||g(d);var f=d[0];f.x=0;f.y=0;f.dx=m[0];f.dy=m[1];n&&g.revalue(f);a([f],f.dx*f.dy/f.value);(n?c:b)(f);l&&(n=d);return d}var g=d3.layout.hierarchy(),k=Math.round,m=[1,1],e=null,h=Pb,l=!1,n,q=0.5*(1+Math.sqrt(5));f.size=function(a){if(!arguments.length)return m;m=a;return f};
f.padding=function(a){function b(c){var d=a.call(f,c,c.depth);return null==d?Pb(c):od(c,"number"===typeof d?[d,d,d,d]:d)}function c(b){return od(b,a)}if(!arguments.length)return e;var d;h=null==(e=a)?Pb:"function"===(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c;return f};f.round=function(a){if(!arguments.length)return k!=Number;k=a?Math.round:Number;return f};f.sticky=function(a){if(!arguments.length)return l;l=a;n=null;return f};f.ratio=function(a){if(!arguments.length)return q;q=a;return f};return ya(f,
g)};d3.csv=pd(",","text/csv");d3.tsv=pd("\t","text/tab-separated-values");d3.geo={};var x=Math.PI/180;d3.geo.azimuthal=function(){function a(a){var c=a[0]*x-g,k=a[1]*x;a=Math.cos(c);var c=Math.sin(c),h=Math.cos(k),k=Math.sin(k),l="orthographic"!==b?e*k+m*h*a:null,n,l="stereographic"===b?1/(1+l):"gnomonic"===b?1/l:"equidistant"===b?(n=Math.acos(l),n?n/Math.sin(n):0):"equalarea"===b?Math.sqrt(2/(1+l)):1;return[d*l*h*c+f[0],d*l*(e*h*a-m*k)+f[1]]}var b="orthographic",c,d=200,f=[480,250],g,k,m,e;a.invert=
function(a){var c=(a[0]-f[0])/d;a=(a[1]-f[1])/d;var k=Math.sqrt(c*c+a*a),h="stereographic"===b?2*Math.atan(k):"gnomonic"===b?Math.atan(k):"equidistant"===b?k:"equalarea"===b?2*Math.asin(0.5*k):Math.asin(k),l=Math.sin(h),h=Math.cos(h);return[(g+Math.atan2(c*l,k*m*h+a*e*l))/x,Math.asin(h*e-(k?a*l*m/k:0))/x]};a.mode=function(c){if(!arguments.length)return b;b=c+"";return a};a.origin=function(b){if(!arguments.length)return c;c=b;g=c[0]*x;k=c[1]*x;m=Math.cos(k);e=Math.sin(k);return a};a.scale=function(b){if(!arguments.length)return d;
d=+b;return a};a.translate=function(b){if(!arguments.length)return f;f=[+b[0],+b[1]];return a};return a.origin([0,0])};d3.geo.albers=function(){function a(a){var b=m*(x*a[0]-k);a=Math.sqrt(e-2*m*Math.sin(x*a[1]))/m;return[f*a*Math.sin(b)+g[0],f*(a*Math.cos(b)-h)+g[1]]}function b(){var b=x*d[0],f=x*d[1],g=x*c[1],l=Math.sin(b),b=Math.cos(b);k=x*c[0];m=0.5*(l+Math.sin(f));e=b*b+2*m*l;h=Math.sqrt(e-2*m*Math.sin(g))/m;return a}var c=[-98,38],d=[29.5,45.5],f=1E3,g=[480,250],k,m,e,h;a.invert=function(a){var b=
(a[0]-g[0])/f,c=h+(a[1]-g[1])/f;a=Math.atan2(b,c);b=Math.sqrt(b*b+c*c);return[(k+a/m)/x,Math.asin((e-b*b*m*m)/(2*m))/x]};a.origin=function(a){if(!arguments.length)return c;c=[+a[0],+a[1]];return b()};a.parallels=function(a){if(!arguments.length)return d;d=[+a[0],+a[1]];return b()};a.scale=function(b){if(!arguments.length)return f;f=+b;return a};a.translate=function(b){if(!arguments.length)return g;g=[+b[0],+b[1]];return a};return b()};d3.geo.albersUsa=function(){function a(a){var k=a[0],m=a[1];return(50<
m?c:-140>k?d:21>m?f:b)(a)}var b=d3.geo.albers(),c=d3.geo.albers().origin([-160,60]).parallels([55,65]),d=d3.geo.albers().origin([-160,20]).parallels([8,18]),f=d3.geo.albers().origin([-60,10]).parallels([8,18]);a.scale=function(g){if(!arguments.length)return b.scale();b.scale(g);c.scale(0.6*g);d.scale(g);f.scale(1.5*g);return a.translate(b.translate())};a.translate=function(g){if(!arguments.length)return b.translate();var k=b.scale()/1E3,m=g[0],e=g[1];b.translate(g);c.translate([m-400*k,e+170*k]);
d.translate([m-190*k,e+200*k]);f.translate([m+580*k,e+430*k]);return a};return a.scale(b.scale())};d3.geo.bonne=function(){function a(a){var e=a[0]*x-d,h=a[1]*x-f;g?(a=k+g-h,h=e*Math.cos(h)/a,e=a*Math.sin(h),h=a*Math.cos(h)-k):(e*=Math.cos(h),h*=-1);return[b*e+c[0],b*h+c[1]]}var b=200,c=[480,250],d,f,g,k;a.invert=function(a){var f=(a[0]-c[0])/b;a=(a[1]-c[1])/b;if(g){var e=k+a,h=Math.sqrt(f*f+e*e);a=k+g-h;f=d+h*Math.atan2(f,e)/Math.cos(a)}else a*=-1,f/=Math.cos(a);return[f/x,a/x]};a.parallel=function(b){if(!arguments.length)return g/
x;k=1/Math.tan(g=b*x);return a};a.origin=function(b){if(!arguments.length)return[d/x,f/x];d=b[0]*x;f=b[1]*x;return a};a.scale=function(c){if(!arguments.length)return b;b=+c;return a};a.translate=function(b){if(!arguments.length)return c;c=[+b[0],+b[1]];return a};return a.origin([0,0]).parallel(45)};d3.geo.equirectangular=function(){function a(a){return[b*(a[0]/360)+c[0],b*(-a[1]/360)+c[1]]}var b=500,c=[480,250];a.invert=function(a){return[360*((a[0]-c[0])/b),-360*((a[1]-c[1])/b)]};a.scale=function(c){if(!arguments.length)return b;
b=+c;return a};a.translate=function(b){if(!arguments.length)return c;c=[+b[0],+b[1]];return a};return a};d3.geo.mercator=function(){function a(a){var f=a[0]/360;a=-(Math.log(Math.tan(Math.PI/4+a[1]*x/2))/x)/360;return[b*f+c[0],b*Math.max(-0.5,Math.min(0.5,a))+c[1]]}var b=500,c=[480,250];a.invert=function(a){return[360*((a[0]-c[0])/b),2*Math.atan(Math.exp(-360*((a[1]-c[1])/b)*x))/x-90]};a.scale=function(c){if(!arguments.length)return b;b=+c;return a};a.translate=function(b){if(!arguments.length)return c;
c=[+b[0],+b[1]];return a};return a};d3.geo.path=function(){function a(a,b){"function"===typeof f&&(g=Qb(f.apply(this,arguments)));h(a);var c=e.length?e.join(""):null;e=[];return c}function b(a){return k(a).join(",")}function c(a){for(var b=Math.abs(d3.geom.polygon(a[0].map(k)).area()),c=0,d=a.length;++c<d;)b-=Math.abs(d3.geom.polygon(a[c].map(k)).area());return b}function d(a){for(var b=d3.geom.polygon(a[0].map(k)),c=b.area(),b=b.centroid(0>c?(c*=-1,1):-1),d=b[0],f=b[1],g=c,e=0,m=a.length;++e<m;)b=
d3.geom.polygon(a[e].map(k)),c=b.area(),b=b.centroid(0>c?(c*=-1,1):-1),d-=b[0],f-=b[1],g-=c;return[d,f,6*g]}var f=4.5,g=Qb(f),k=d3.geo.albersUsa(),e=[],h=Xa({FeatureCollection:function(a){a=a.features;for(var b=-1,c=a.length;++b<c;)e.push(h(a[b].geometry))},Feature:function(a){h(a.geometry)},Point:function(a){e.push("M",b(a.coordinates),g)},MultiPoint:function(a){a=a.coordinates;for(var c=-1,d=a.length;++c<d;)e.push("M",b(a[c]),g)},LineString:function(a){a=a.coordinates;var c=-1,d=a.length;for(e.push("M");++c<
d;)e.push(b(a[c]),"L");e.pop()},MultiLineString:function(a){a=a.coordinates;for(var c=-1,d=a.length,f,g,k;++c<d;){f=a[c];g=-1;k=f.length;for(e.push("M");++g<k;)e.push(b(f[g]),"L");e.pop()}},Polygon:function(a){a=a.coordinates;for(var c=-1,d=a.length,f,g,k;++c<d;)if(f=a[c],g=-1,0<(k=f.length-1)){for(e.push("M");++g<k;)e.push(b(f[g]),"L");e[e.length-1]="Z"}},MultiPolygon:function(a){a=a.coordinates;for(var c=-1,d=a.length,f,g,k,h,l,n;++c<d;){f=a[c];g=-1;for(k=f.length;++g<k;)if(h=f[g],l=-1,0<(n=h.length-
1)){for(e.push("M");++l<n;)e.push(b(h[l]),"L");e[e.length-1]="Z"}}},GeometryCollection:function(a){a=a.geometries;for(var b=-1,c=a.length;++b<c;)e.push(h(a[b]))}}),l=a.area=Xa({FeatureCollection:function(a){var b=0;a=a.features;for(var c=-1,d=a.length;++c<d;)b+=l(a[c]);return b},Feature:function(a){return l(a.geometry)},Polygon:function(a){return c(a.coordinates)},MultiPolygon:function(a){var b=0;a=a.coordinates;for(var d=-1,f=a.length;++d<f;)b+=c(a[d]);return b},GeometryCollection:function(a){var b=
0;a=a.geometries;for(var c=-1,d=a.length;++c<d;)b+=l(a[c]);return b}},0),n=a.centroid=Xa({Feature:function(a){return n(a.geometry)},Polygon:function(a){a=d(a.coordinates);return[a[0]/a[2],a[1]/a[2]]},MultiPolygon:function(a){a=a.coordinates;for(var b,c=0,f=0,g=0,k=-1,e=a.length;++k<e;)b=d(a[k]),c+=b[0],f+=b[1],g+=b[2];return[c/g,f/g]}});a.projection=function(b){k=b;return a};a.pointRadius=function(b){"function"===typeof b?f=b:(f=+b,g=Qb(f));return a};return a};d3.geo.bounds=function(a){var b=Infinity,
c=Infinity,d=-Infinity,f=-Infinity;Ya(a,function(a,k){a<b&&(b=a);a>d&&(d=a);k<c&&(c=k);k>f&&(f=k)});return[[b,c],[d,f]]};var qd={Feature:function(a,b){Ya(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=0,f=c.length;d<f;d++)Ya(c[d].geometry,b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=0,f=c.length;d<f;d++)Ya(c[d],b)},LineString:rd,MultiLineString:function(a,b){for(var c=a.coordinates,d=0,f=c.length;d<f;d++)for(var g=c[d],k=0,e=g.length;k<e;k++)b.apply(null,g[k])},
MultiPoint:rd,MultiPolygon:function(a,b){for(var c=a.coordinates,d=0,f=c.length;d<f;d++)for(var g=c[d][0],k=0,e=g.length;k<e;k++)b.apply(null,g[k])},Point:function(a,b){b.apply(null,a.coordinates)},Polygon:function(a,b){for(var c=a.coordinates[0],d=0,f=c.length;d<f;d++)b.apply(null,c[d])}};d3.geo.circle=function(){function a(){}function b(a){return k.distance(a)<g}function c(a){for(var b=-1,c=a.length,d=[],f,e,h,m,l;++b<c;)l=k.distance(h=a[b]),l<g?(e&&d.push(td(e,h)((m-g)/(m-l))),d.push(h),f=e=null):
(e=h,!f&&d.length&&(d.push(td(d[d.length-1],e)((g-m)/(l-m))),f=e)),m=l;f=a[0];(e=d[0])&&(h[0]===f[0]&&h[1]===f[1]&&!(h[0]===e[0]&&h[1]===e[1]))&&d.push(e);a=0;e=(b=d.length)?[d[0]]:d;for(m=k.source();++a<b;){h=k.source(d[a-1])(d[a]).coordinates;c=0;for(f=h.length;++c<f;)e.push(h[c])}k.source(m);return e}var d=[0,0],f=89.99,g=f*x,k=d3.geo.greatArc().source(d).target(e);a.clip=function(a){"function"===typeof d&&k.source(d.apply(this,arguments));return h(a)||null};var h=Xa({FeatureCollection:function(a){var b=
a.features.map(h).filter(e);return b&&(a=Object.create(a),a.features=b,a)},Feature:function(a){var b=h(a.geometry);return b&&(a=Object.create(a),a.geometry=b,a)},Point:function(a){return b(a.coordinates)&&a},MultiPoint:function(a){var c=a.coordinates.filter(b);return c.length&&{type:a.type,coordinates:c}},LineString:function(a){var b=c(a.coordinates);return b.length&&(a=Object.create(a),a.coordinates=b,a)},MultiLineString:function(a){var b=a.coordinates.map(c).filter(function(a){return a.length});
return b.length&&(a=Object.create(a),a.coordinates=b,a)},Polygon:function(a){var b=a.coordinates.map(c);return b[0].length&&(a=Object.create(a),a.coordinates=b,a)},MultiPolygon:function(a){var b=a.coordinates.map(function(a){return a.map(c)}).filter(function(a){return a[0].length});return b.length&&(a=Object.create(a),a.coordinates=b,a)},GeometryCollection:function(a){var b=a.geometries.map(h).filter(e);return b.length&&(a=Object.create(a),a.geometries=b,a)}});a.origin=function(b){if(!arguments.length)return d;
d=b;"function"!==typeof d&&k.source(d);return a};a.angle=function(b){if(!arguments.length)return f;g=(f=+b)*x;return a};return d3.rebind(a,k,"precision")};d3.geo.greatArc=function(){function a(){for(var b=a.distance.apply(this,arguments),d=0,b=g/b,e=[c];1>(d+=b);)e.push(k(d));e.push(f);return{type:"LineString",coordinates:e}}var b=Ne,c,d=Oe,f,g=6*x,k=sd();a.distance=function(){"function"===typeof b&&k.source(c=b.apply(this,arguments));"function"===typeof d&&k.target(f=d.apply(this,arguments));return k.distance()};
a.source=function(d){if(!arguments.length)return b;b=d;"function"!==typeof b&&k.source(c=b);return a};a.target=function(b){if(!arguments.length)return d;d=b;"function"!==typeof d&&k.target(f=d);return a};a.precision=function(b){if(!arguments.length)return g/x;g=b*x;return a};return a};d3.geo.greatCircle=d3.geo.circle;d3.geom={};d3.geom.contour=function(a,b){var c;if(!(c=b))a:{for(var d=c=0;;){if(a(c,d)){c=[c,d];break a}0===c?(c=d+1,d=0):(c-=1,d+=1)}c=void 0}var d=[],f=c[0],g=c[1],k=0,e=0,h=NaN,l=
NaN,e=0;do e=0,a(f-1,g-1)&&(e+=1),a(f,g-1)&&(e+=2),a(f-1,g)&&(e+=4),a(f,g)&&(e+=8),6===e?(k=-1===l?-1:1,e=0):9===e?(k=0,e=1===h?-1:1):(k=rf[e],e=sf[e]),k!=h&&e!=l&&(d.push([f,g]),h=k,l=e),f+=k,g+=e;while(c[0]!=f||c[1]!=g);return d};var rf=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,NaN],sf=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,NaN];d3.geom.hull=function(a){if(3>a.length)return[];var b=a.length,c=b-1,d=[],f=[],g,k=0,e,h,l,n,q,s,r;for(g=1;g<b;++g)a[g][1]<a[k][1]?k=g:a[g][1]==a[k][1]&&(k=a[g][0]<a[k][0]?g:k);for(g=
0;g<b;++g)g!==k&&(h=a[g][1]-a[k][1],e=a[g][0]-a[k][0],d.push({angle:Math.atan2(h,e),index:g}));d.sort(function(a,b){return a.angle-b.angle});r=d[0].angle;s=d[0].index;q=0;for(g=1;g<c;++g)b=d[g].index,r==d[g].angle?(e=a[s][0]-a[k][0],h=a[s][1]-a[k][1],l=a[b][0]-a[k][0],n=a[b][1]-a[k][1],e*e+h*h>=l*l+n*n?d[g].index=-1:(d[q].index=-1,r=d[g].angle,q=g,s=b)):(r=d[g].angle,q=g,s=b);f.push(k);for(b=g=0;2>g;++b)-1!==d[b].index&&(f.push(d[b].index),g++);for(k=f.length;b<c;++b)if(-1!==d[b].index){for(;!Pe(f[k-
2],f[k-1],d[b].index,a);)--k;f[k++]=d[b].index}c=[];for(g=0;g<k;++g)c.push(a[f[g]]);return c};d3.geom.polygon=function(a){a.area=function(){for(var b=0,c=a.length,d=a[c-1][0]*a[0][1],f=a[c-1][1]*a[0][0];++b<c;)d+=a[b-1][0]*a[b][1],f+=a[b-1][1]*a[b][0];return 0.5*(f-d)};a.centroid=function(b){var c=-1,d=a.length,f=0,g=0,k,e=a[d-1],h;for(arguments.length||(b=-1/(6*a.area()));++c<d;)k=e,e=a[c],h=k[0]*e[1]-e[0]*k[1],f+=(k[0]+e[0])*h,g+=(k[1]+e[1])*h;return[f*b,g*b]};a.clip=function(b){for(var c,d=-1,
f=a.length,g,k,e=a[f-1],h,l,n;++d<f;){c=b.slice();b.length=0;h=a[d];l=c[(k=c.length)-1];for(g=-1;++g<k;)n=c[g],Rb(n,e,h)?(Rb(l,e,h)||b.push(ud(l,n,e,h)),b.push(n)):Rb(l,e,h)&&b.push(ud(l,n,e,h)),l=n;e=h}return b};return a};d3.geom.voronoi=function(a){var b=a.map(function(){return[]});vd(a,function(a){var d,f,g,k;1===a.a&&0<=a.b?(d=a.ep.r,f=a.ep.l):(d=a.ep.l,f=a.ep.r);1===a.a?(g=d?d.y:-1E6,d=a.c-a.b*g,k=f?f.y:1E6,f=a.c-a.b*k):(d=d?d.x:-1E6,g=a.c-a.a*d,f=f?f.x:1E6,k=a.c-a.a*f);d=[d,g];f=[f,k];b[a.region.l.index].push(d,
f);b[a.region.r.index].push(d,f)});return b.map(function(b,d){var f=a[d][0],g=a[d][1];b.forEach(function(a){a.angle=Math.atan2(a[0]-f,a[1]-g)});return b.sort(function(a,b){return a.angle-b.angle}).filter(function(a,d){return!d||1E-10<a.angle-b[d-1].angle})})};var Sb={l:"r",r:"l"};d3.geom.delaunay=function(a){var b=a.map(function(){return[]}),c=[];vd(a,function(c){b[c.region.l.index].push(a[c.region.r.index])});b.forEach(function(b,f){var g=a[f],k=g[0],e=g[1];b.forEach(function(a){a.angle=Math.atan2(a[0]-
k,a[1]-e)});b.sort(function(a,b){return a.angle-b.angle});for(var h=0,l=b.length-1;h<l;h++)c.push([g,b[h],b[h+1]])});return c};d3.geom.quadtree=function(a,b,c,d,f){function g(a,b,c,d,f,g){if(!isNaN(b.x)&&!isNaN(b.y))if(a.leaf){var e=a.point;e?(0.01>Math.abs(e.x-b.x)+Math.abs(e.y-b.y)||(a.point=null,k(a,e,c,d,f,g)),k(a,b,c,d,f,g)):a.point=b}else k(a,b,c,d,f,g)}function k(a,b,c,d,f,k){var e=0.5*(c+f),h=0.5*(d+k),l=b.x>=e,m=b.y>=h,n=(m<<1)+l;a.leaf=!1;a=a.nodes[n]||(a.nodes[n]={leaf:!0,nodes:[],point:null});
l?c=e:f=e;m?d=h:k=h;g(a,b,c,d,f,k)}var e,h=-1,l=a.length;l&&isNaN(a[0].x)&&(a=a.map(Qe));if(5>arguments.length)if(3===arguments.length)f=d=c,c=b;else{b=c=Infinity;for(d=f=-Infinity;++h<l;)e=a[h],e.x<b&&(b=e.x),e.y<c&&(c=e.y),e.x>d&&(d=e.x),e.y>f&&(f=e.y);e=d-b;h=f-c;e>h?f=c+e:d=b+h}var n={leaf:!0,nodes:[],point:null,add:function(a){g(n,a,b,c,d,f)},visit:function(a){za(a,n,b,c,d,f)}};a.forEach(n.add);return n};d3.time={};var M=Date,gb="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ");
fa.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},
valueOf:function(){return this._.valueOf()},setDate:function(){aa.setUTCDate.apply(this._,arguments)},setDay:function(){aa.setUTCDay.apply(this._,arguments)},setFullYear:function(){aa.setUTCFullYear.apply(this._,arguments)},setHours:function(){aa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){aa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){aa.setUTCMinutes.apply(this._,arguments)},setMonth:function(){aa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){aa.setUTCSeconds.apply(this._,
arguments)},setTime:function(){aa.setTime.apply(this._,arguments)}};var aa=Date.prototype,Id=gb.map(wd),hb="January February March April May June July August September October November December".split(" "),cc=hb.map(wd);d3.time.format=function(a){function b(b){for(var f=[],g=-1,k=0,e,h;++g<c;)37==a.charCodeAt(g)&&(f.push(a.substring(k,g),(h=ib[e=a.charAt(++g)])?h(b):e),k=g+1);f.push(a.substring(k,g));return f.join("")}var c=a.length;b.parse=function(b){var c={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Za(c,
a,b,0)!=b.length)return null;"p"in c&&(c.H=c.H%12+12*c.p);b=new M;b.setFullYear(c.y,c.m,c.d);b.setHours(c.H,c.M,c.S,c.L);return b};b.toString=function(){return a};return b};var U=d3.format("02d"),Jd=d3.format("03d"),tf=d3.format("04d"),uf=d3.format("2d"),Kd=$a(gb),Ld=$a(Id),Md=$a(hb),vf=xd(hb),Nd=$a(cc),wf=xd(cc),ib={a:function(a){return Id[a.getDay()]},A:function(a){return gb[a.getDay()]},b:function(a){return cc[a.getMonth()]},B:function(a){return hb[a.getMonth()]},c:d3.time.format("%a %b %e %H:%M:%S %Y"),
d:function(a){return U(a.getDate())},e:function(a){return uf(a.getDate())},H:function(a){return U(a.getHours())},I:function(a){return U(a.getHours()%12||12)},j:function(a){return Jd(1+d3.time.dayOfYear(a))},L:function(a){return Jd(a.getMilliseconds())},m:function(a){return U(a.getMonth()+1)},M:function(a){return U(a.getMinutes())},p:function(a){return 12<=a.getHours()?"PM":"AM"},S:function(a){return U(a.getSeconds())},U:function(a){return U(d3.time.sundayOfYear(a))},w:function(a){return a.getDay()},
W:function(a){return U(d3.time.mondayOfYear(a))},x:d3.time.format("%m/%d/%y"),X:d3.time.format("%H:%M:%S"),y:function(a){return U(a.getFullYear()%100)},Y:function(a){return tf(a.getFullYear()%1E4)},Z:function(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var c=~~(Math.abs(b)/60),b=Math.abs(b)%60;return a+U(c)+U(b)},"%":function(a){return"%"}},Re={a:function(a,b,c){Ld.lastIndex=0;return(a=Ld.exec(b.substring(c)))?c+a[0].length:-1},A:function(a,b,c){Kd.lastIndex=0;return(a=Kd.exec(b.substring(c)))?c+
a[0].length:-1},b:function(a,b,c){Nd.lastIndex=0;return(b=Nd.exec(b.substring(c)))?(a.m=wf.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){Md.lastIndex=0;return(b=Md.exec(b.substring(c)))?(a.m=vf.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,c){return Za(a,ib.c.toString(),b,c)},d:yd,e:yd,H:zd,I:zd,L:function(a,b,c){L.lastIndex=0;return(b=L.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1},m:function(a,b,c){L.lastIndex=0;return(b=L.exec(b.substring(c,c+2)))?(a.m=b[0]-
1,c+b[0].length):-1},M:function(a,b,c){L.lastIndex=0;return(b=L.exec(b.substring(c,c+2)))?(a.M=+b[0],c+b[0].length):-1},p:function(a,b,c){b=xf.get(b.substring(c,c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:function(a,b,c){L.lastIndex=0;return(b=L.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1},x:function(a,b,c){return Za(a,ib.x.toString(),b,c)},X:function(a,b,c){return Za(a,ib.X.toString(),b,c)},y:function(a,b,c){L.lastIndex=0;return(b=L.exec(b.substring(c,c+2)))?(a.y=+b[0]+(68<+b[0]?
1900:2E3),c+b[0].length):-1},Y:function(a,b,c){L.lastIndex=0;return(b=L.exec(b.substring(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}},L=/^\s*\d+/,xf=d3.map({am:0,pm:1});d3.time.format.utc=function(a){function b(a){try{M=fa;var b=new M;b._=a;return c(b)}finally{M=Date}}var c=d3.time.format(a);b.parse=function(a){try{M=fa;var b=c.parse(a);return b&&b._}finally{M=Date}};b.toString=c.toString;return b};var Od=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?Tb:Od;Tb.parse=
function(a){a=new Date(a);return isNaN(a)?null:a};Tb.toString=Od.toString;d3.time.second=ga(function(a){return new M(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});d3.time.seconds=d3.time.second.range;d3.time.seconds.utc=d3.time.second.utc.range;d3.time.minute=ga(function(a){return new M(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});d3.time.minutes=d3.time.minute.range;
d3.time.minutes.utc=d3.time.minute.utc.range;d3.time.hour=ga(function(a){var b=a.getTimezoneOffset()/60;return new M(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});d3.time.hours=d3.time.hour.range;d3.time.hours.utc=d3.time.hour.utc.range;d3.time.day=ga(function(a){var b=new M(1970,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});
d3.time.days=d3.time.day.range;d3.time.days.utc=d3.time.day.utc.range;d3.time.dayOfYear=function(a){var b=d3.time.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};gb.forEach(function(a,b){a=a.toLowerCase();b=7-b;var c=d3.time[a]=ga(function(a){(a=d3.time.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)-
(c!==b)});d3.time[a+"s"]=c.range;d3.time[a+"s"].utc=c.utc.range;d3.time[a+"OfYear"]=function(a){var c=d3.time.year(a).getDay();return Math.floor((d3.time.dayOfYear(a)+(c+b)%7)/7)}});d3.time.week=d3.time.sunday;d3.time.weeks=d3.time.sunday.range;d3.time.weeks.utc=d3.time.sunday.utc.range;d3.time.weekOfYear=d3.time.sundayOfYear;d3.time.month=ga(function(a){a=d3.time.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});d3.time.months=d3.time.month.range;
d3.time.months.utc=d3.time.month.utc.range;d3.time.year=ga(function(a){a=d3.time.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+b)},function(a){return a.getFullYear()});d3.time.years=d3.time.year.range;d3.time.years.utc=d3.time.year.utc.range;var bb=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],dc=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],
[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],yf=[[d3.time.format("%Y"),function(a){return!0}],[d3.time.format("%B"),function(a){return a.getMonth()}],[d3.time.format("%b %d"),function(a){return 1!=a.getDate()}],[d3.time.format("%a %d"),function(a){return a.getDay()&&1!=a.getDate()}],[d3.time.format("%I %p"),function(a){return a.getHours()}],
[d3.time.format("%I:%M"),function(a){return a.getMinutes()}],[d3.time.format(":%S"),function(a){return a.getSeconds()}],[d3.time.format(".%L"),function(a){return a.getMilliseconds()}]],Pd=d3.scale.linear(),zf=Ad(yf);dc.year=function(a,b){return Pd.domain(a.map(Se)).ticks(b).map(Wb)};d3.time.scale=function(){return Ub(d3.scale.linear(),dc,zf)};var Qd=dc.map(function(a){return[a[0].utc,a[1]]}),Af=[[d3.time.format.utc("%Y"),function(a){return!0}],[d3.time.format.utc("%B"),function(a){return a.getUTCMonth()}],
[d3.time.format.utc("%b %d"),function(a){return 1!=a.getUTCDate()}],[d3.time.format.utc("%a %d"),function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],[d3.time.format.utc("%I %p"),function(a){return a.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(a){return a.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(a){return a.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(a){return a.getUTCMilliseconds()}]],Bf=Ad(Af);Qd.year=function(a,b){return Pd.domain(a.map(Te)).ticks(b).map(Xb)};
d3.time.scale.utc=function(){return Ub(d3.scale.linear(),Qd,Bf)}})();var Rickshaw={namespace:function(l,h){for(var e=l.split("."),n=Rickshaw,q=1,r=e.length;q<r;q++){var s=e[q];n[s]=n[s]||{};n=n[s]}return n},keys:function(l){var h=[],e;for(e in l)h.push(e);return h},extend:function(l,h){for(var e in h)l[e]=h[e];return l},clone:function(l){return JSON.parse(JSON.stringify(l))}};if("undefined"!=typeof module&&module.exports){var d3=require("d3");module.exports=Rickshaw}
(function(l){function h(e,h){for(var l in h)h.hasOwnProperty(l)&&(e[l]=h[l]);return e}function e(e){if(n(e)!==qa)throw new TypeError;var h=[],l;for(l in e)e.hasOwnProperty(l)&&h.push(l);return h}function n(e){switch(e){case null:return R;case void 0:return y}switch(typeof e){case "boolean":return N;case "number":return H;case "string":return jb}return qa}function q(e){e=e.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");
return 1==e.length&&!e[0]?[]:e}function r(e,h){return function(){var l=s([w(e,this)],arguments);return h.apply(this,l)}}function s(e,h){for(var l=e.length,n=h.length;n--;)e[l+n]=h[n];return e}function w(e,h){if(2>arguments.length&&"undefined"==typeof arguments[0])return this;var l=e,n=Da.call(arguments,2);return function(){var e,q=n;e=arguments;e=(q=Da.call(q,0),s(q,e));return l.apply(h,e)}}var E=Object.prototype.toString,R="Null",y="Undefined",N="Boolean",H="Number",jb="String",qa="Object",Da=Array.prototype.slice,
Ea=function(){},ha=function(){function l(){}var n=function(){for(var e in{toString:1})if("toString"===e)return!1;return!0}();return{create:function(){function e(){this.initialize.apply(this,arguments)}var n=null,q=[].slice.apply(arguments);"[object Function]"===E.call(q[0])&&(n=q.shift());h(e,ha.Methods);e.superclass=n;e.subclasses=[];if(n){l.prototype=n.prototype;e.prototype=new l;try{n.subclasses.push(e)}catch(s){}}for(var n=0,r=q.length;n<r;n++)e.addMethods(q[n]);return e.prototype.initialize||
(e.prototype.initialize=Ea),e.prototype.constructor=e,e},Methods:{addMethods:function(h){var l=this.superclass&&this.superclass.prototype,s=e(h);n&&(h.toString!=Object.prototype.toString&&s.push("toString"),h.valueOf!=Object.prototype.valueOf&&s.push("valueOf"));for(var y=0,N=s.length;y<N;y++){var R=s[y],H=h[R];if(l&&"[object Function]"===E.call(H)&&"$super"==q(H)[0]){var ba=H,H=r(function(e){return function(){return l[e].apply(this,arguments)}}(R),ba);H.valueOf=w(ba.valueOf,ba);H.toString=w(ba.toString,
ba)}this.prototype[R]=H}return this}}}}();l.exports?l.exports.Class=ha:l.Class=ha})(Rickshaw);Rickshaw.namespace("Rickshaw.Compat.ClassList");
Rickshaw.Compat.ClassList=function(){"undefined"!=typeof document&&!("classList"in document.createElement("a"))&&function(l){l=(l.HTMLElement||l.Element).prototype;var h=Object,e=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},n=Array.prototype.indexOf||function(e){for(var h=0,l=this.length;h<l;h++)if(h in this&&this[h]===e)return h;return-1},q=function(e,h){this.name=e;this.code=DOMException[e];this.message=h},r=function(e,h){if(""===h)throw new q("SYNTAX_ERR","An invalid or illegal string was specified");
if(/\s/.test(h))throw new q("INVALID_CHARACTER_ERR","String contains an invalid character");return n.call(e,h)},s=function(h){for(var l=e.call(h.className),l=l?l.split(/\s+/):[],n=0,q=l.length;n<q;n++)this.push(l[n]);this._updateClassName=function(){h.className=this.toString()}},w=s.prototype=[],E=function(){return new s(this)};q.prototype=Error.prototype;w.item=function(e){return this[e]||null};w.contains=function(e){return e+="",-1!==r(this,e)};w.add=function(e){e+="";-1===r(this,e)&&(this.push(e),
this._updateClassName())};w.remove=function(e){e=r(this,e+"");-1!==e&&(this.splice(e,1),this._updateClassName())};w.toggle=function(e){e+="";-1===r(this,e)?this.add(e):this.remove(e)};w.toString=function(){return this.join(" ")};if(h.defineProperty){w={get:E,enumerable:!0,configurable:!0};try{h.defineProperty(l,"classList",w)}catch(R){-2146823252===R.number&&(w.enumerable=!1,h.defineProperty(l,"classList",w))}}else h.prototype.__defineGetter__&&l.__defineGetter__("classList",E)}(window)};
("undefined"!=typeof RICKSHAW_NO_COMPAT&&!RICKSHAW_NO_COMPAT||"undefined"==typeof RICKSHAW_NO_COMPAT)&&new Rickshaw.Compat.ClassList;Rickshaw.namespace("Rickshaw.Graph");
Rickshaw.Graph=function(l){if(!l.element)throw"Rickshaw.Graph needs a reference to an element";this.element=l.element;this.series=l.series;this.defaults={interpolation:"cardinal",offset:"zero",min:void 0,max:void 0,preserve:!1};Rickshaw.keys(this.defaults).forEach(function(e){this[e]=l[e]||this.defaults[e]},this);this.window={};this.updateCallbacks=[];var h=this;this.initialize=function(e){this.validateSeries(e.series);this.series.active=function(){return h.series.filter(function(e){return!e.disabled})};
this.setSize({width:e.width,height:e.height});this.element.classList.add("rickshaw_graph");this.vis=d3.select(this.element).append("svg:svg").attr("width",this.width).attr("height",this.height);[Rickshaw.Graph.Renderer.Stack,Rickshaw.Graph.Renderer.Line,Rickshaw.Graph.Renderer.Bar,Rickshaw.Graph.Renderer.Area,Rickshaw.Graph.Renderer.ScatterPlot].forEach(function(e){e&&h.registerRenderer(new e({graph:h}))});this.setRenderer(e.renderer||"stack",e);this.discoverRange()};this.validateSeries=function(e){if(!(e instanceof
Array||e instanceof Rickshaw.Series))throw"series is not an array: "+Object.prototype.toString.apply(e);e.forEach(function(e){if(!(e instanceof Object))throw"series element is not an object: "+e;if(!e.data)throw"series has no data: "+JSON.stringify(e);if(!(e.data instanceof Array))throw"series data is not an array: "+JSON.stringify(e.data);var h=e.data[0].x;e=e.data[0].y;if("number"!=typeof h||"number"!=typeof e&&null!==e)throw"x and y properties of points should be numbers instead of "+typeof h+
" and "+typeof e;},this)};this.dataDomain=function(){var e=this.series[0].data;return[e[0].x,e.slice(-1).shift().x]};this.discoverRange=function(){var e=this.renderer.domain();this.x=d3.scale.linear().domain(e.x).range([0,this.width]);this.y=d3.scale.linear().domain(e.y).range([this.height,0]);this.y.magnitude=d3.scale.linear().domain([e.y[0]-e.y[0],e.y[1]-e.y[0]]).range([0,this.height])};this.update=this.render=function(){this.stackData();this.discoverRange();this.renderer.render();this.updateCallbacks.forEach(function(e){e()})};
this.stackData=function(){var e=this.series.active().map(function(e){return e.data}).map(function(e){return e.filter(function(e){return this._slice(e)},this)},this),e=this.preserve?Rickshaw.clone(e):e;this.stackData.hooks.data.forEach(function(l){e=l.f.apply(h,[e])});var l;if(!this.renderer.unstack){this._validateStackable();var q=d3.layout.stack();q.offset(h.offset);l=q(e)}l=l||e;this.stackData.hooks.after.forEach(function(q){l=q.f.apply(h,[e])});var r=0;return this.series.forEach(function(e){e.disabled||
(e.stack=l[r++])}),this.stackedData=l,l};this._validateStackable=function(){var e;this.series.forEach(function(h){if((e=e||h.data.length)&&h.data.length!=e)throw"stacked series cannot have differing numbers of points: "+e+" vs "+h.data.length+"; see Rickshaw.Series.fill()";},this)};this.stackData.hooks={data:[],after:[]};this._slice=function(e){return!0};this.onUpdate=function(e){this.updateCallbacks.push(e)};this.registerRenderer=function(e){this._renderers=this._renderers||{};this._renderers[e.name]=
e};this.configure=function(e){(e.width||e.height)&&this.setSize(e);Rickshaw.keys(this.defaults).forEach(function(h){this[h]=h in e?e[h]:h in this?this[h]:this.defaults[h]},this);this.setRenderer(e.renderer||this.renderer.name,e)};this.setRenderer=function(e,h){if(!this._renderers[e])throw"couldn't find renderer "+e;this.renderer=this._renderers[e];"object"==typeof h&&this.renderer.configure(h)};this.setSize=function(e){e=e||{};if(void 0!==typeof window)var h=window.getComputedStyle(this.element,null),
l=parseInt(h.getPropertyValue("width"),10),h=parseInt(h.getPropertyValue("height"),10);this.width=e.width||l||400;this.height=e.height||h||250;this.vis&&this.vis.attr("width",this.width).attr("height",this.height)};this.initialize(l)};Rickshaw.namespace("Rickshaw.Fixtures.Color");
Rickshaw.Fixtures.Color=function(){this.schemes={};this.schemes.spectrum14="#ecb796 #dc8f70 #b2a470 #92875a #716c49 #d2ed82 #bbe468 #a1d05d #e7cbe6 #d8aad6 #a888c2 #9dc2d3 #649eb9 #387aa3".split(" ").reverse();this.schemes.spectrum2000="#57306f #514c76 #646583 #738394 #6b9c7d #84b665 #a7ca50 #bfe746 #e2f528 #fff726 #ecdd00 #d4b11d #de8800 #de4800 #c91515 #9a0000 #7b0429 #580839 #31082b".split(" ");this.schemes.spectrum2001="#2f243f #3c2c55 #4a3768 #565270 #6b6b7c #72957f #86ad6e #a1bc5e #b8d954 #d3e04e #ccad2a #cc8412 #c1521d #ad3821 #8a1010 #681717 #531e1e #3d1818 #320a1b".split(" ");
this.schemes.classic9="#423d4f #4a6860 #848f39 #a2b73c #ddcb53 #c5a32f #7d5836 #963b20 #7c2626 #491d37 #2f254a".split(" ").reverse();this.schemes.httpStatus={503:"#ea5029",502:"#d23f14",500:"#bf3613",410:"#efacea",409:"#e291dc",403:"#f457e8",408:"#e121d2",401:"#b92dae",405:"#f47ceb",404:"#a82a9f",400:"#b263c6",301:"#6fa024",302:"#87c32b",307:"#a0d84c",304:"#28b55c",200:"#1a4f74",206:"#27839f",201:"#52adc9",202:"#7c979f",203:"#a5b8bd",204:"#c1cdd1"};this.schemes.colorwheel="#b5b6a9 #858772 #785f43 #96557e #4682b4 #65b9ac #73c03a #cb513a".split(" ").reverse();
this.schemes.cool="#5e9d2f #73c03a #4682b4 #7bc3b8 #a9884e #c1b266 #a47493 #c09fb5".split(" ");this.schemes.munin="#00cc00 #0066b3 #ff8000 #ffcc00 #330099 #990099 #ccff00 #ff0000 #808080 #008f00 #00487d #b35a00 #b38f00 #6b006b #8fb300 #b30000 #bebebe #80ff80 #80c9ff #ffc080 #ffe680 #aa80ff #ee00cc #ff8080 #666600 #ffbfff #00ffcc #cc6699 #999900".split(" ")};Rickshaw.namespace("Rickshaw.Fixtures.RandomData");
Rickshaw.Fixtures.RandomData=function(l){l=l||1;var h=200,e=Math.floor((new Date).getTime()/1E3);this.addData=function(n){var q=100*Math.random()+15+h,r=n[0].length,s=1;n.forEach(function(h){var n=20*Math.random(),R=q/25+s++ +15*(Math.cos(11*r*s/960)+2)+7*(Math.cos(r/7)+2)+1*(Math.cos(r/17)+2);h.push({x:r*l+e,y:R+n})});h=0.85*q}};Rickshaw.namespace("Rickshaw.Fixtures.Time");
Rickshaw.Fixtures.Time=function(){(new Date).getTimezoneOffset();var l=this;this.months="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");this.units=[{name:"decade",seconds:315576E3,formatter:function(h){return 10*parseInt(h.getUTCFullYear()/10,10)}},{name:"year",seconds:31557600,formatter:function(h){return h.getUTCFullYear()}},{name:"month",seconds:2635200,formatter:function(h){return l.months[h.getUTCMonth()]}},{name:"week",seconds:604800,formatter:function(h){return l.formatDate(h)}},
{name:"day",seconds:86400,formatter:function(h){return h.getUTCDate()}},{name:"6 hour",seconds:21600,formatter:function(h){return l.formatTime(h)}},{name:"hour",seconds:3600,formatter:function(h){return l.formatTime(h)}},{name:"15 minute",seconds:900,formatter:function(h){return l.formatTime(h)}},{name:"minute",seconds:60,formatter:function(h){return h.getUTCMinutes()}},{name:"15 second",seconds:15,formatter:function(h){return h.getUTCSeconds()+"s"}},{name:"second",seconds:1,formatter:function(h){return h.getUTCSeconds()+
"s"}}];this.unit=function(h){return this.units.filter(function(e){return h==e.name}).shift()};this.formatDate=function(h){return h.toUTCString().match(/, (\w+ \w+ \w+)/)[1]};this.formatTime=function(h){return h.toUTCString().match(/(\d+:\d+):/)[1]};this.ceil=function(h,e){var l,q;return"month"==e.name?(l=new Date(1E3*(h+e.seconds-1)),q=new Date(0),q.setUTCFullYear(l.getUTCFullYear()),q.setUTCMonth(l.getUTCMonth()),q.setUTCDate(1),q.setUTCHours(0),q.setUTCMinutes(0),q.setUTCSeconds(0),q.setUTCMilliseconds(0),
q.getTime()/1E3):"year"==e.name?(l=new Date(1E3*(h+e.seconds-1)),q=new Date(0),q.setUTCFullYear(l.getUTCFullYear()),q.setUTCMonth(0),q.setUTCDate(1),q.setUTCHours(0),q.setUTCMinutes(0),q.setUTCSeconds(0),q.setUTCMilliseconds(0),q.getTime()/1E3):Math.ceil(h/e.seconds)*e.seconds}};Rickshaw.namespace("Rickshaw.Fixtures.Number");
Rickshaw.Fixtures.Number.formatKMBT=function(l){return abs_y=Math.abs(l),1E12<=abs_y?l/1E12+"T":1E9<=abs_y?l/1E9+"B":1E6<=abs_y?l/1E6+"M":1E3<=abs_y?l/1E3+"K":1>abs_y&&0<l?l.toFixed(2):0===abs_y?"":l};Rickshaw.Fixtures.Number.formatBase1024KMGTP=function(l){return abs_y=Math.abs(l),0x4000000000000<=abs_y?l/0x4000000000000+"P":1099511627776<=abs_y?l/1099511627776+"T":1073741824<=abs_y?l/1073741824+"G":1048576<=abs_y?l/1048576+"M":1024<=abs_y?l/1024+"K":1>abs_y&&0<l?l.toFixed(2):0===abs_y?"":l};Rickshaw.namespace("Rickshaw.Color.Palette");
Rickshaw.Color.Palette=function(l){var h=new Rickshaw.Fixtures.Color;l=l||{};this.schemes={};this.scheme=h.schemes[l.scheme]||l.scheme||h.schemes.colorwheel;this.generatorIndex=this.runningIndex=0;if(l.interpolatedStopCount){var h=this.scheme.length-1,e,n,q=[];for(e=0;e<h;e++){q.push(this.scheme[e]);var r=d3.interpolateHsl(this.scheme[e],this.scheme[e+1]);for(n=1;n<l.interpolatedStopCount;n++)q.push(r(1/l.interpolatedStopCount*n))}q.push(this.scheme[this.scheme.length-1]);this.scheme=q}this.rotateCount=
this.scheme.length;this.color=function(e){return this.scheme[e]||this.scheme[this.runningIndex++]||this.interpolateColor()||"#808080"};this.interpolateColor=function(){if(Array.isArray(this.scheme)){var e;return this.generatorIndex==2*this.rotateCount-1?(e=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[0])(0.5),this.generatorIndex=0,this.rotateCount*=2):(e=d3.interpolateHsl(this.scheme[this.generatorIndex],this.scheme[this.generatorIndex+1])(0.5),this.generatorIndex++),this.scheme.push(e),
e}}};Rickshaw.namespace("Rickshaw.Graph.Ajax");
Rickshaw.Graph.Ajax=Rickshaw.Class.create({initialize:function(l){this.dataURL=l.dataURL;this.onData=l.onData||function(h){return h};this.onComplete=l.onComplete||function(){};this.onError=l.onError||function(){};this.args=l;this.request()},request:function(){$.ajax({url:this.dataURL,dataType:"json",success:this.success.bind(this),error:this.error.bind(this)})},error:function(){console.log("error loading dataURL: "+this.dataURL);this.onError(this)},success:function(l,h){l=this.onData(l);this.args.series=
this._splice({data:l,series:this.args.series});this.graph=this.graph||new Rickshaw.Graph(this.args);this.graph.render();this.onComplete(this)},_splice:function(l){var h=l.data,e=l.series;return l.series?(e.forEach(function(e){var l=e.key||e.name;if(!l)throw"series needs a key or a name";h.forEach(function(h){var s=h.key||h.name;if(!s)throw"data needs a key or a name";l==s&&["color","name","data"].forEach(function(l){h[l]&&(e[l]=h[l])})})}),e):h}});Rickshaw.namespace("Rickshaw.Graph.Annotate");
Rickshaw.Graph.Annotate=function(l){this.graph=l.graph;this.elements={timeline:l.element};var h=this;this.data={};this.elements.timeline.classList.add("rickshaw_annotation_timeline");this.add=function(e,l,q){h.data[e]=h.data[e]||{boxes:[]};h.data[e].boxes.push({content:l,end:q})};this.update=function(){Rickshaw.keys(h.data).forEach(function(e){var l=h.data[e],q=h.graph.x(e);if(0>q||q>h.graph.x.range()[1])l.element&&(l.line.classList.add("offscreen"),l.element.style.display="none"),l.boxes.forEach(function(e){e.rangeElement&&
e.rangeElement.classList.add("offscreen")});else{if(!l.element){var r=l.element=document.createElement("div");r.classList.add("annotation");this.elements.timeline.appendChild(r);r.addEventListener("click",function(e){r.classList.toggle("active");l.line.classList.toggle("active");l.boxes.forEach(function(e){e.rangeElement&&e.rangeElement.classList.toggle("active")})},!1)}l.element.style.left=q+"px";l.element.style.display="block";l.boxes.forEach(function(e){var r=e.element;r||(r=e.element=document.createElement("div"),
r.classList.add("content"),r.innerHTML=e.content,l.element.appendChild(r),l.line=document.createElement("div"),l.line.classList.add("annotation_line"),h.graph.element.appendChild(l.line),e.end&&(e.rangeElement=document.createElement("div"),e.rangeElement.classList.add("annotation_range"),h.graph.element.appendChild(e.rangeElement)));if(e.end){var r=q,E=Math.min(h.graph.x(e.end),h.graph.x.range()[1]);r>E&&(E=q,r=Math.max(h.graph.x(e.end),h.graph.x.range()[0]));e.rangeElement.style.left=r+"px";e.rangeElement.style.width=
E-r+"px";e.rangeElement.classList.remove("offscreen")}l.line.classList.remove("offscreen");l.line.style.left=q+"px"})}},this)};this.graph.onUpdate(function(){h.update()})};Rickshaw.namespace("Rickshaw.Graph.Axis.Time");
Rickshaw.Graph.Axis.Time=function(l){var h=this;this.graph=l.graph;this.elements=[];this.ticksTreatment=l.ticksTreatment||"plain";this.fixedTimeUnit=l.timeUnit;var e=new Rickshaw.Fixtures.Time;this.appropriateTimeUnit=function(){var h,l=e.units,r=this.graph.x.domain(),s=r[1]-r[0];return l.forEach(function(e){2<=Math.floor(s/e.seconds)&&(h=h||e)}),h||e.units[e.units.length-1]};this.tickOffsets=function(){for(var h=this.graph.x.domain(),l=this.fixedTimeUnit||this.appropriateTimeUnit(),r=Math.ceil((h[1]-
h[0])/l.seconds),h=h[0],s=[],w=0;w<r;w++){var E=e.ceil(h,l),h=E+l.seconds/2;s.push({value:E,unit:l})}return s};this.render=function(){this.elements.forEach(function(e){e.parentNode.removeChild(e)});this.elements=[];this.tickOffsets().forEach(function(e){if(!(h.graph.x(e.value)>h.graph.x.range()[1])){var l=document.createElement("div");l.style.left=h.graph.x(e.value)+"px";l.classList.add("x_tick");l.classList.add(h.ticksTreatment);var r=document.createElement("div");r.classList.add("title");r.innerHTML=
e.unit.formatter(new Date(1E3*e.value));l.appendChild(r);h.graph.element.appendChild(l);h.elements.push(l)}})};this.graph.onUpdate(function(){h.render()})};Rickshaw.namespace("Rickshaw.Graph.Axis.X");
Rickshaw.Graph.Axis.X=function(l){var h=this;this.initialize=function(e){this.graph=e.graph;this.orientation=e.orientation||"top";var l=e.pixelsPerTick||75;this.ticks=e.ticks||Math.floor(this.graph.width/l);this.tickSize=e.tickSize||4;this.ticksTreatment=e.ticksTreatment||"plain";e.element?(this.element=e.element,this._discoverSize(e.element,e),this.vis=d3.select(e.element).append("svg:svg").attr("height",this.height).attr("width",this.width).attr("class","rickshaw_graph x_axis_d3"),this.element=
this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):this.vis=this.graph.vis;this.graph.onUpdate(function(){h.render()})};this.setSize=function(e){e=e||{};this.element&&(this._discoverSize(this.element.parentNode,e),this.vis.attr("height",this.height).attr("width",1.1*this.width),this.element.style.left=-1*Math.floor(0.1*this.width/2)+"px")};this.render=function(){this.graph.width!==this._renderWidth&&this.setSize({auto:!0});var e=d3.svg.axis().scale(this.graph.x).orient(this.orientation);
e.tickFormat(l.tickFormat||function(e){return e});var h=Math.floor(0.1*this.width/2)||0,h="top"==this.orientation?"translate("+h+","+(this.height||this.graph.height)+")":"translate("+h+", 0)";this.element&&this.vis.selectAll("*").remove();this.vis.append("svg:g").attr("class",["x_ticks_d3",this.ticksTreatment].join(" ")).attr("transform",h).call(e.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));h=("bottom"==this.orientation?1:-1)*this.graph.height;this.graph.vis.append("svg:g").attr("class",
"x_grid_d3").call(e.ticks(this.ticks).tickSubdivide(0).tickSize(h));this._renderHeight=this.graph.height};this._discoverSize=function(e,h){if("undefined"!=typeof window){var l=window.getComputedStyle(e,null),r=parseInt(l.getPropertyValue("height"),10);if(!h.auto)var s=parseInt(l.getPropertyValue("width"),10)}this.width=1.1*(h.width||s||this.graph.width);this.height=h.height||r||40};this.initialize(l)};Rickshaw.namespace("Rickshaw.Graph.Axis.Y");
Rickshaw.Graph.Axis.Y=function(l){var h=this;this.initialize=function(e){this.graph=e.graph;this.orientation=e.orientation||"right";var l=e.pixelsPerTick||75;this.ticks=e.ticks||Math.floor(this.graph.height/l);this.tickSize=e.tickSize||4;this.ticksTreatment=e.ticksTreatment||"plain";e.element?(this.element=e.element,this.vis=d3.select(e.element).append("svg:svg").attr("class","rickshaw_graph y_axis"),this.element=this.vis[0][0],this.element.style.position="relative",this.setSize({width:e.width,height:e.height})):
this.vis=this.graph.vis;this.graph.onUpdate(function(){h.render()})};this.setSize=function(e){e=e||{};if(this.element){if("undefined"!=typeof window){var h=window.getComputedStyle(this.element.parentNode,null),l=parseInt(h.getPropertyValue("width"),10);if(!e.auto)var r=parseInt(h.getPropertyValue("height"),10)}this.width=e.width||l||0.1*this.graph.width;this.height=e.height||r||this.graph.height;this.vis.attr("width",this.width).attr("height",1.1*this.height);this.element.style.top=-1*0.1*this.height+
"px"}};this.render=function(){this.graph.height!==this._renderHeight&&this.setSize({auto:!0});var e=d3.svg.axis().scale(this.graph.y).orient(this.orientation);e.tickFormat(l.tickFormat||function(e){return e});if("left"==this.orientation)var h="translate("+this.width+", "+0.1*this.height+")";this.element&&this.vis.selectAll("*").remove();this.vis.append("svg:g").attr("class",["y_ticks",this.ticksTreatment].join(" ")).attr("transform",h).call(e.ticks(this.ticks).tickSubdivide(0).tickSize(this.tickSize));
h=("right"==this.orientation?1:-1)*this.graph.width;this.graph.vis.append("svg:g").attr("class","y_grid").call(e.ticks(this.ticks).tickSubdivide(0).tickSize(h));this._renderHeight=this.graph.height};this.initialize(l)};Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Highlight");
Rickshaw.Graph.Behavior.Series.Highlight=function(l){this.graph=l.graph;this.legend=l.legend;var h=this,e={},n=null;this.addHighlightEvents=function(l){l.element.addEventListener("mouseover",function(r){n||(n=l,h.legend.lines.forEach(function(n,r){if(l===n){if(0<r&&h.graph.renderer.unstack){var E=h.graph.series.length-r-1;n.originalIndex=E;E=h.graph.series.splice(E,1)[0];h.graph.series.push(E)}}else e[n.series.name]=e[n.series.name]||n.series.color,n.series.color=d3.interpolateRgb(n.series.color,
d3.rgb("#d8d8d8"))(0.8).toString()}),h.graph.update())},!1);l.element.addEventListener("mouseout",function(r){n&&(n=null,h.legend.lines.forEach(function(n){if(l===n&&n.hasOwnProperty("originalIndex")){var r=h.graph.series.pop();h.graph.series.splice(n.originalIndex,0,r);delete n.originalIndex}e[n.series.name]&&(n.series.color=e[n.series.name])}),h.graph.update())},!1)};this.legend&&this.legend.lines.forEach(function(e){h.addHighlightEvents(e)})};Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Order");
Rickshaw.Graph.Behavior.Series.Order=function(l){this.graph=l.graph;this.legend=l.legend;var h=this;if("undefined"==typeof window.$)throw"couldn't find jQuery at window.$";if("undefined"==typeof window.$.ui)throw"couldn't find jQuery UI at window.$.ui";$(function(){$(h.legend.list).sortable({containment:"parent",tolerance:"pointer",update:function(e,l){var q=[];$(h.legend.list).find("li").each(function(e,h){h.series&&q.push(h.series)});for(var r=h.graph.series.length-1;0<=r;r--)h.graph.series[r]=
q.shift();h.graph.update()}});$(h.legend.list).disableSelection()});this.graph.onUpdate(function(){var e=window.getComputedStyle(h.legend.element).height;h.legend.element.style.height=e})};Rickshaw.namespace("Rickshaw.Graph.Behavior.Series.Toggle");
Rickshaw.Graph.Behavior.Series.Toggle=function(l){this.graph=l.graph;this.legend=l.legend;var h=this;this.addAnchor=function(e){var l=document.createElement("a");l.innerHTML="&#10004;";l.classList.add("action");e.element.insertBefore(l,e.element.firstChild);l.onclick=function(h){e.series.disabled?(e.series.enable(),e.element.classList.remove("disabled")):(e.series.disable(),e.element.classList.add("disabled"))};e.element.getElementsByTagName("span")[0].onclick=function(l){l=e.series.disabled;if(!l)for(var n=
0;n<h.legend.lines.length;n++){var s=h.legend.lines[n];if(e.series!==s.series&&!s.series.disabled){l=!0;break}}l?(e.series.enable(),e.element.classList.remove("disabled"),h.legend.lines.forEach(function(h){e.series!==h.series&&(h.series.disable(),h.element.classList.add("disabled"))})):h.legend.lines.forEach(function(e){e.series.enable();e.element.classList.remove("disabled")})}};this.legend&&("undefined"!=typeof $&&$(this.legend.list).sortable&&$(this.legend.list).sortable({start:function(e,h){h.item.bind("no.onclick",
function(e){e.preventDefault()})},stop:function(e,h){setTimeout(function(){h.item.unbind("no.onclick")},250)}}),this.legend.lines.forEach(function(e){h.addAnchor(e)}));this._addBehavior=function(){this.graph.series.forEach(function(e){e.disable=function(){if(1>=h.graph.series.length)throw"only one series left";e.disabled=!0;h.graph.update()};e.enable=function(){e.disabled=!1;h.graph.update()}})};this._addBehavior();this.updateBehaviour=function(){this._addBehavior()}};Rickshaw.namespace("Rickshaw.Graph.HoverDetail");
Rickshaw.Graph.HoverDetail=Rickshaw.Class.create({initialize:function(l){var h=this.graph=l.graph;this.xFormatter=l.xFormatter||function(e){return(new Date(1E3*e)).toUTCString()};this.yFormatter=l.yFormatter||function(e){return null===e?e:e.toFixed(2)};var e=this.element=document.createElement("div");e.className="detail";this.visible=!0;h.element.appendChild(e);this.lastEvent=null;this._addListeners();this.onShow=l.onShow;this.onHide=l.onHide;this.onRender=l.onRender;this.formatter=l.formatter||this.formatter},
formatter:function(l,h,e,n,q,r){return l.name+":&nbsp;"+q},update:function(l){if(l=l||this.lastEvent)if(this.lastEvent=l,l.target.nodeName.match(/^(path|svg|rect)$/)){var h=this.graph,e=l.offsetX||l.layerX,n=l.offsetY||l.layerY,q=0,r=[],s;this.graph.series.active().forEach(function(l){for(var w=this.graph.stackedData[q++],y=h.x.invert(e),N=d3.scale.linear().domain([w[0].x,w.slice(-1)[0].x]).range([0,w.length-1]),H=Math.round(N(y)),N=Math.min(H||0,w.length-1);H<w.length-1&&w[H]&&w[H+1];){if(w[H].x<=
y&&w[H+1].x>y){N=H;break}w[H+1].x<=y?H++:H--}0>N&&(N=0);y=w[N];w=Math.sqrt(Math.pow(Math.abs(h.x(y.x)-e),2)+Math.pow(Math.abs(h.y(y.y+y.y0)-n),2));N=l.yFormatter||this.yFormatter;l={formattedXValue:(l.xFormatter||this.xFormatter)(y.x),formattedYValue:N(y.y),series:l,value:y,distance:w,order:q,name:l.name};if(!s||w<s.distance)s=l;r.push(l)},this);s.active=!0;l=s.value.x;var w=s.formattedXValue;this.element.innerHTML="";this.element.style.left=h.x(l)+"px";this.visible&&this.render({points:r,detail:r,
mouseX:e,mouseY:n,formattedXValue:w,domainX:l})}},hide:function(){this.visible=!1;this.element.classList.add("inactive");"function"==typeof this.onHide&&this.onHide()},show:function(){this.visible=!0;this.element.classList.remove("inactive");"function"==typeof this.onShow&&this.onShow()},render:function(l){var h=this.graph,e=l.points.filter(function(e){return e.active}).shift();if(null!==e.value.y){var n=this.xFormatter(e.value.x),q=this.yFormatter(e.value.y);this.element.innerHTML="";this.element.style.left=
h.x(e.value.x)+"px";h=document.createElement("div");h.className="x_label";h.innerHTML=n;this.element.appendChild(h);h=document.createElement("div");h.className="item";h.innerHTML=this.formatter(e.series,e.value.x,e.value.y,n,q,e);h.style.top=this.graph.y(e.value.y0+e.value.y)+"px";this.element.appendChild(h);n=document.createElement("div");n.className="dot";n.style.top=h.style.top;n.style.borderColor=e.series.color;this.element.appendChild(n);e.active&&(h.className="item active",n.className="dot active");
this.show();"function"==typeof this.onRender&&this.onRender(l)}},_addListeners:function(){this.graph.element.addEventListener("mousemove",function(l){this.visible=!0;this.update(l)}.bind(this),!1);this.graph.onUpdate(function(){this.update()}.bind(this));this.graph.element.addEventListener("mouseout",function(l){l.relatedTarget&&!(l.relatedTarget.compareDocumentPosition(this.graph.element)&Node.DOCUMENT_POSITION_CONTAINS)&&this.hide()}.bind(this),!1)}});Rickshaw.namespace("Rickshaw.Graph.JSONP");
Rickshaw.Graph.JSONP=Rickshaw.Class.create(Rickshaw.Graph.Ajax,{request:function(){$.ajax({url:this.dataURL,dataType:"jsonp",success:this.success.bind(this),error:this.error.bind(this)})}});Rickshaw.namespace("Rickshaw.Graph.Legend");
Rickshaw.Graph.Legend=function(l){var h=this.element=l.element,e=this.graph=l.graph,n=this;h.classList.add("rickshaw_legend");var q=this.list=document.createElement("ul");h.appendChild(q);h=e.series.map(function(e){return e});l.naturalOrder||(h=h.reverse());this.lines=[];this.addLine=function(e){var h=document.createElement("li");h.className="line";e.disabled&&(h.className+=" disabled");var l=document.createElement("div");l.className="swatch";l.style.backgroundColor=e.color;h.appendChild(l);l=document.createElement("span");
l.className="label";l.innerHTML=e.name;h.appendChild(l);q.appendChild(h);h.series=e;e.noLegend&&(h.style.display="none");e={element:h,series:e};n.shelving&&(n.shelving.addAnchor(e),n.shelving.updateBehaviour());n.highlighter&&n.highlighter.addHighlightEvents(e);n.lines.push(e)};h.forEach(function(e){n.addLine(e)});e.onUpdate(function(){})};Rickshaw.namespace("Rickshaw.Graph.RangeSlider");
Rickshaw.Graph.RangeSlider=Rickshaw.Class.create({initialize:function(l){this.element=l.element;l=this.graph=l.graph;this.build();l.onUpdate(function(){this.update()}.bind(this))},build:function(){var l=this.element,h=this.graph;$(function(){$(l).slider({range:!0,min:h.dataDomain()[0],max:h.dataDomain()[1],values:[h.dataDomain()[0],h.dataDomain()[1]],slide:function(e,l){h.window.xMin=l.values[0];h.window.xMax=l.values[1];h.update();h.dataDomain()[0]==l.values[0]&&(h.window.xMin=void 0);h.dataDomain()[1]==
l.values[1]&&(h.window.xMax=void 0)}})});l[0].style.width=h.width+"px"},update:function(){var l=this.element,h=this.graph,e=$(l).slider("option","values");$(l).slider("option","min",h.dataDomain()[0]);$(l).slider("option","max",h.dataDomain()[1]);null==h.window.xMin&&(e[0]=h.dataDomain()[0]);null==h.window.xMax&&(e[1]=h.dataDomain()[1]);$(l).slider("option","values",e)}});Rickshaw.namespace("Rickshaw.Graph.Renderer");
Rickshaw.Graph.Renderer=Rickshaw.Class.create({initialize:function(l){this.graph=l.graph;this.tension=l.tension||this.tension;this.graph.unstacker=this.graph.unstacker||new Rickshaw.Graph.Unstacker({graph:this.graph});this.configure(l)},seriesPathFactory:function(){},seriesStrokeFactory:function(){},defaults:function(){return{tension:0.8,strokeWidth:2,unstack:!0,padding:{top:0.01,right:0,bottom:0.01,left:0},stroke:!1,fill:!1}},domain:function(){var l=this.graph.stackedData||this.graph.stackData(),
h=l[0][0],e=h.x,n=h.x,q=h.y+h.y0,r=h.y+h.y0;l.forEach(function(h){h.forEach(function(e){null!=e.y&&(e=e.y+e.y0,e<q&&(q=e),e>r&&(r=e))});h[0].x<e&&(e=h[0].x);h[h.length-1].x>n&&(n=h[h.length-1].x)});e-=(n-e)*this.padding.left;n+=(n-e)*this.padding.right;q="auto"===this.graph.min?q:this.graph.min||0;r=void 0===this.graph.max?r:this.graph.max;if("auto"===this.graph.min||0>q)q-=(r-q)*this.padding.bottom;return void 0===this.graph.max&&(r+=(r-q)*this.padding.top),{x:[e,n],y:[q,r]}},render:function(){var l=
this.graph;l.vis.selectAll("*").remove();var h=l.vis.selectAll("path").data(this.graph.stackedData).enter().append("svg:path").attr("d",this.seriesPathFactory()),e=0;l.series.forEach(function(l){l.disabled||(l.path=h[0][e++],this._styleSeries(l))},this)},_styleSeries:function(l){var h=this.stroke?l.color:"none";l.path.setAttribute("fill",this.fill?l.color:"none");l.path.setAttribute("stroke",h);l.path.setAttribute("stroke-width",this.strokeWidth);l.path.setAttribute("class",l.className)},configure:function(l){l=
l||{};Rickshaw.keys(this.defaults()).forEach(function(h){l.hasOwnProperty(h)?"object"==typeof this.defaults()[h]?Rickshaw.keys(this.defaults()[h]).forEach(function(e){this[h][e]=void 0!==l[h][e]?l[h][e]:void 0!==this[h][e]?this[h][e]:this.defaults()[h][e]},this):this[h]=void 0!==l[h]?l[h]:void 0!==this[h]?this[h]:void 0!==this.graph[h]?this.graph[h]:this.defaults()[h]:this[h]=this[h]||this.graph[h]||this.defaults()[h]},this)},setStrokeWidth:function(l){void 0!==l&&(this.strokeWidth=l)},setTension:function(l){void 0!==
l&&(this.tension=l)}});Rickshaw.namespace("Rickshaw.Graph.Renderer.Line");Rickshaw.Graph.Renderer.Line=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"line",defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!1,stroke:!0})},seriesPathFactory:function(){var l=this.graph,h=d3.svg.line().x(function(e){return l.x(e.x)}).y(function(e){return l.y(e.y)}).interpolate(this.graph.interpolation).tension(this.tension);return h.defined&&h.defined(function(e){return null!==e.y}),h}});
Rickshaw.namespace("Rickshaw.Graph.Renderer.Stack");
Rickshaw.Graph.Renderer.Stack=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"stack",defaults:function($super){return Rickshaw.extend($super(),{fill:!0,stroke:!1,unstack:!1})},seriesPathFactory:function(){var l=this.graph,h=d3.svg.area().x(function(e){return l.x(e.x)}).y0(function(e){return l.y(e.y0)}).y1(function(e){return l.y(e.y+e.y0)}).interpolate(this.graph.interpolation).tension(this.tension);return h.defined&&h.defined(function(e){return null!==e.y}),h}});Rickshaw.namespace("Rickshaw.Graph.Renderer.Bar");
Rickshaw.Graph.Renderer.Bar=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"bar",defaults:function($super){var h=Rickshaw.extend($super(),{gapSize:0.05,unstack:!1});return delete h.tension,h},initialize:function($super,h){h=h||{};this.gapSize=h.gapSize||this.gapSize;$super(h)},domain:function($super){var h=$super(),e=this._frequentInterval();return h.x[1]+=parseInt(e.magnitude,10),h},barWidth:function(){var l=(this.graph.stackedData||this.graph.stackData()).slice(-1).shift(),h=this._frequentInterval();
return this.graph.x(l[0].x+h.magnitude*(1-this.gapSize))},render:function(){var l=this.graph;l.vis.selectAll("*").remove();var h=this.barWidth(),e=0,n=l.series.filter(function(e){return!e.disabled}).length,q=this.unstack?h/n:h,r=function(e){return"matrix("+[1,0,0,0>e.y?-1:1,0,0>e.y?2*l.y.magnitude(Math.abs(e.y)):0].join()+")"};l.series.forEach(function(h){if(!h.disabled){var n=l.vis.selectAll("path").data(h.stack.filter(function(e){return null!==e.y})).enter().append("svg:rect").attr("x",function(h){return l.x(h.x)+
e}).attr("y",function(e){return l.y(e.y0+Math.abs(e.y))*(0>e.y?-1:1)}).attr("width",q).attr("height",function(e){return l.y.magnitude(Math.abs(e.y))}).attr("transform",r);Array.prototype.forEach.call(n[0],function(e){e.setAttribute("fill",h.color)});this.unstack&&(e+=q)}},this)},_frequentInterval:function(){for(var l=(this.graph.stackedData||this.graph.stackData()).slice(-1).shift(),h={},e=0;e<l.length-1;e++){var n=l[e+1].x-l[e].x;h[n]=h[n]||0;h[n]++}var q={count:0};return Rickshaw.keys(h).forEach(function(e){q.count<
h[e]&&(q={count:h[e],magnitude:e})}),this._frequentInterval=function(){return q},q}});Rickshaw.namespace("Rickshaw.Graph.Renderer.Area");
Rickshaw.Graph.Renderer.Area=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"area",defaults:function($super){return Rickshaw.extend($super(),{unstack:!1,fill:!1,stroke:!1})},seriesPathFactory:function(){var l=this.graph,h=d3.svg.area().x(function(e){return l.x(e.x)}).y0(function(e){return l.y(e.y0)}).y1(function(e){return l.y(e.y+e.y0)}).interpolate(l.interpolation).tension(this.tension);return h.defined&&h.defined(function(e){return null!==e.y}),h},seriesStrokeFactory:function(){var l=this.graph,
h=d3.svg.line().x(function(e){return l.x(e.x)}).y(function(e){return l.y(e.y+e.y0)}).interpolate(l.interpolation).tension(this.tension);return h.defined&&h.defined(function(e){return null!==e.y}),h},render:function(){var l=this.graph;l.vis.selectAll("*").remove();var h=this.unstack?"append":"insert",e=l.vis.selectAll("path").data(this.graph.stackedData).enter()[h]("svg:g","g");e.append("svg:path").attr("d",this.seriesPathFactory()).attr("class","area");this.stroke&&e.append("svg:path").attr("d",this.seriesStrokeFactory()).attr("class",
"line");var n=0;l.series.forEach(function(h){h.disabled||(h.path=e[0][n++],this._styleSeries(h))},this)},_styleSeries:function(l){l.path&&(d3.select(l.path).select(".area").attr("fill",l.color),this.stroke&&d3.select(l.path).select(".line").attr("fill","none").attr("stroke",l.stroke||d3.interpolateRgb(l.color,"black")(0.125)).attr("stroke-width",this.strokeWidth),l.className&&l.path.setAttribute("class",l.className))}});Rickshaw.namespace("Rickshaw.Graph.Renderer.ScatterPlot");
Rickshaw.Graph.Renderer.ScatterPlot=Rickshaw.Class.create(Rickshaw.Graph.Renderer,{name:"scatterplot",defaults:function($super){return Rickshaw.extend($super(),{unstack:!0,fill:!0,stroke:!1,padding:{top:0.01,right:0.01,bottom:0.01,left:0.01},dotSize:4})},initialize:function($super,h){$super(h)},render:function(){var l=this.graph;l.vis.selectAll("*").remove();l.series.forEach(function(h){if(!h.disabled){var e=l.vis.selectAll("path").data(h.stack.filter(function(e){return null!==e.y})).enter().append("svg:circle").attr("cx",
function(e){return l.x(e.x)}).attr("cy",function(e){return l.y(e.y)}).attr("r",function(e){return"r"in e?e.r:l.renderer.dotSize});Array.prototype.forEach.call(e[0],function(e){e.setAttribute("fill",h.color)})}},this)}});Rickshaw.namespace("Rickshaw.Graph.Smoother");
Rickshaw.Graph.Smoother=Rickshaw.Class.create({initialize:function(l){this.graph=l.graph;this.element=l.element;this.aggregationScale=1;this.build();this.graph.stackData.hooks.data.push({name:"smoother",orderPosition:50,f:this.transformer.bind(this)})},build:function(){var l=this;this.element&&$(function(){$(l.element).slider({min:1,max:100,slide:function(h,e){l.setScale(e.value);l.graph.update()}})})},setScale:function(l){if(1>l)throw"scale out of range: "+l;this.aggregationScale=l;this.graph.update()},
transformer:function(l){if(1==this.aggregationScale)return l;var h=[];return l.forEach(function(e){for(var l=[];e.length;){var q=0,r=0,s=e.splice(0,this.aggregationScale);s.forEach(function(e){q+=e.x/s.length;r+=e.y/s.length});l.push({x:q,y:r})}h.push(l)}.bind(this)),h}});Rickshaw.namespace("Rickshaw.Graph.Unstacker");
Rickshaw.Graph.Unstacker=function(l){this.graph=l.graph;var h=this;this.graph.stackData.hooks.after.push({name:"unstacker",f:function(e){return h.graph.renderer.unstack?(e.forEach(function(e){e.forEach(function(e){e.y0=0})}),e):e}})};Rickshaw.namespace("Rickshaw.Series");
Rickshaw.Series=Rickshaw.Class.create(Array,{initialize:function(l,h,e){e=e||{};this.palette=new Rickshaw.Color.Palette(h);this.timeBase="undefined"==typeof e.timeBase?Math.floor((new Date).getTime()/1E3):e.timeBase;this.setTimeInterval("undefined"==typeof e.timeInterval?1E3:e.timeInterval);l&&"object"==typeof l&&l instanceof Array&&l.forEach(function(e){this.addItem(e)},this)},addItem:function(l){if("undefined"==typeof l.name)throw"addItem() needs a name";l.color=l.color||this.palette.color(l.name);
l.data=l.data||[];0===l.data.length&&this.length&&0<this.getIndex()?this[0].data.forEach(function(h){l.data.push({x:h.x,y:0})}):0===l.data.length&&l.data.push({x:this.timeBase-(this.timeInterval||0),y:0});this.push(l);this.legend&&this.legend.addLine(this.itemByName(l.name))},addData:function(l){var h=this.getIndex();Rickshaw.keys(l).forEach(function(e){this.itemByName(e)||this.addItem({name:e})},this);this.forEach(function(e){e.data.push({x:(h*this.timeInterval||1)+this.timeBase,y:l[e.name]||0})},
this)},getIndex:function(){return this[0]&&this[0].data&&this[0].data.length?this[0].data.length:0},itemByName:function(l){for(var h=0;h<this.length;h++)if(this[h].name==l)return this[h]},setTimeInterval:function(l){this.timeInterval=l/1E3},setTimeBase:function(l){this.timeBase=l},dump:function(){var l={timeBase:this.timeBase,timeInterval:this.timeInterval,items:[]};return this.forEach(function(h){var e={color:h.color,name:h.name,data:[]};h.data.forEach(function(h){e.data.push({x:h.x,y:h.y})});l.items.push(e)}),
l},load:function(l){l.timeInterval&&(this.timeInterval=l.timeInterval);l.timeBase&&(this.timeBase=l.timeBase);l.items&&l.items.forEach(function(h){this.push(h);this.legend&&this.legend.addLine(this.itemByName(h.name))},this)}});Rickshaw.Series.zeroFill=function(l){Rickshaw.Series.fill(l,0)};
Rickshaw.Series.fill=function(l,h){for(var e,n=0,q=l.map(function(e){return e.data});n<Math.max.apply(null,q.map(function(e){return e.length}));)e=Math.min.apply(null,q.filter(function(e){return e[n]}).map(function(e){return e[n].x})),q.forEach(function(l){(!l[n]||l[n].x!=e)&&l.splice(n,0,{x:e,y:h})}),n++};Rickshaw.namespace("Rickshaw.Series.FixedDuration");
Rickshaw.Series.FixedDuration=Rickshaw.Class.create(Rickshaw.Series,{initialize:function(l,h,e){e=e||{};if("undefined"==typeof e.timeInterval)throw Error("FixedDuration series requires timeInterval");if("undefined"==typeof e.maxDataPoints)throw Error("FixedDuration series requires maxDataPoints");this.palette=new Rickshaw.Color.Palette(h);this.timeBase="undefined"==typeof e.timeBase?Math.floor((new Date).getTime()/1E3):e.timeBase;this.setTimeInterval(e.timeInterval);this[0]&&this[0].data&&this[0].data.length?
(this.currentSize=this[0].data.length,this.currentIndex=this[0].data.length):(this.currentSize=0,this.currentIndex=0);this.maxDataPoints=e.maxDataPoints;l&&"object"==typeof l&&l instanceof Array&&(l.forEach(function(e){this.addItem(e)},this),this.currentSize+=1,this.currentIndex+=1);this.timeBase-=(this.maxDataPoints-this.currentSize)*this.timeInterval;if("undefined"!=typeof this.maxDataPoints&&this.currentSize<this.maxDataPoints)for(var n=this.maxDataPoints-this.currentSize-1;0<n;n--)this.currentSize+=
1,this.currentIndex+=1,this.forEach(function(e){e.data.unshift({x:((n-1)*this.timeInterval||1)+this.timeBase,y:0,i:n})},this)},addData:function($super,h){$super(h);this.currentSize+=1;this.currentIndex+=1;if(void 0!==this.maxDataPoints)for(;this.currentSize>this.maxDataPoints;)this.dropData()},dropData:function(){this.forEach(function(l){l.data.splice(0,1)});this.currentSize-=1},getIndex:function(){return this.currentIndex}});
